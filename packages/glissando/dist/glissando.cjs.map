{"version":3,"file":"glissando.cjs","sources":["../../../node_modules/mithril-stream-standalone/dist/mithril-stream-standalone.module.js","../src/GlissandoModel.ts","../src/util.ts"],"sourcesContent":["function g(t) {\n  return p(function() {\n    return t.map(function(e) {\n      return e();\n    });\n  }, t);\n}\nfunction h(t, e, u) {\n  var n = u.map(function(c) {\n    var f = t(e, c);\n    return f !== i.SKIP && (e = f), f;\n  });\n  return n(e), n;\n}\nfunction l(t, e) {\n  var u = t.map(function(c) {\n    return c[0];\n  }), n = p(function() {\n    var c = arguments[arguments.length - 1];\n    return u.forEach(function(f, r) {\n      c.indexOf(f) > -1 && (e = t[r][1](e, f()));\n    }), e;\n  }, u);\n  return n(e), n;\n}\nfunction _() {\n  var t = arguments[0], e = Array.prototype.slice.call(arguments, 1);\n  return g(e).map(function(u) {\n    return t.apply(void 0, u);\n  });\n}\nfunction s(t) {\n  return t._state === \"pending\" || t._state === \"active\" || t._state === \"changing\";\n}\nvar i = function(t) {\n  var e = [], u = [];\n  function n(r) {\n    return arguments.length && r !== i.SKIP && (t = r, s(n) && (n._changing(), n._state = \"active\", e.slice().forEach(function(a, o) {\n      s(a) && a(this[o](t));\n    }, u.slice()))), t;\n  }\n  n.constructor = i, n._state = arguments.length && t !== i.SKIP ? \"active\" : \"pending\", n._parents = [], n._changing = function() {\n    s(n) && (n._state = \"changing\"), e.forEach(function(r) {\n      r._changing();\n    });\n  }, n._map = function(r, a) {\n    var o = a ? i() : i(r(t));\n    return o._parents.push(n), e.push(o), u.push(r), o;\n  }, n.map = function(r) {\n    return n._map(r, n._state !== \"active\");\n  };\n  var c;\n  function f() {\n    return c = i(), c.map(function(r) {\n      return r === !0 && (n._parents.forEach(function(a) {\n        a._unregisterChild(n);\n      }), n._state = \"ended\", n._parents.length = e.length = u.length = 0), r;\n    }), c;\n  }\n  return n.toJSON = function() {\n    return t != null && typeof t.toJSON == \"function\" ? t.toJSON() : t;\n  }, n[\"fantasy-land/map\"] = n.map, n[\"fantasy-land/ap\"] = function(r) {\n    return p(\n      function(a, o) {\n        return a()(o());\n      },\n      [r, n]\n    );\n  }, n._unregisterChild = function(r) {\n    var a = e.indexOf(r);\n    a !== -1 && (e.splice(a, 1), u.splice(a, 1));\n  }, Object.defineProperty(n, \"end\", {\n    get: function() {\n      return c || f();\n    }\n  }), n;\n};\nfunction p(t, e) {\n  var u = e.every(function(a) {\n    if (a.constructor !== i)\n      throw new Error(\n        \"Ensure that each item passed to stream.combine/stream.merge/lift is a stream.\"\n      );\n    return a._state === \"active\";\n  }), n = u ? i(t.apply(null, e.concat([e]))) : i(), c = [], f = e.map(function(a) {\n    return a._map(function(o) {\n      return c.push(a), (u || e.every(function(m) {\n        return m._state !== \"pending\";\n      })) && (u = !0, n(t.apply(null, e.concat([c]))), c = []), o;\n    }, !0);\n  }), r = n.end.map(function(a) {\n    a === !0 && (f.forEach(function(o) {\n      o.end(!0);\n    }), r.end(!0));\n  });\n  return n;\n}\ni.SKIP = {};\ni.lift = _;\ni.scan = h;\ni.merge = g;\ni.combine = p;\ni.scanMerge = l;\ni[\"fantasy-land/of\"] = i;\nvar d = !1;\nObject.defineProperty(i, \"HALT\", {\n  get: function() {\n    return d || console.log(\"HALT is deprecated and has been renamed to SKIP\"), d = !0, i.SKIP;\n  }\n});\nexport {\n  i as default\n};\n//# sourceMappingURL=mithril-stream-standalone.module.js.map\n","import Stream from 'mithril-stream-standalone';\n\nimport type { Glissando } from './types';\n\ntype PatchFn = (state: Glissando.State) => Glissando.State;\n\nconst calculateNewIndex = (\n  state: Glissando.State,\n  index: number | undefined,\n) => {\n  if (index === undefined || Number.isNaN(index)) {\n    return {\n      newIndex: state.index,\n      shouldUpdate: false,\n    };\n  }\n  const newIndex = Math.min(index, state.count - 1);\n  const isValid = newIndex >= 0 && newIndex < state.count;\n  const shouldUpdate = isValid && newIndex !== state.index;\n  return {\n    newIndex,\n    shouldUpdate,\n  };\n};\n\nconst setIndex =\n  (state: Glissando.State) => (change: Glissando.IndexChange) => {\n    const { newIndex, shouldUpdate } = calculateNewIndex(state, change.index);\n    return shouldUpdate\n      ? {\n          ...state,\n          ...(change.animate ? undefined : { index: newIndex }),\n          targetIndex: newIndex,\n          isAnimating: !!change.animate,\n        }\n      : state;\n  };\n\nconst setLocation =\n  (state: Glissando.State) => (change: Glissando.LocationChange) => {\n    if (!state.locations || state.locations.length === 0) {\n      return state;\n    }\n    let locationStr = change.location.toString();\n    let index = state.locations.indexOf(locationStr);\n    if (index === -1) {\n      // Location does not exist; default to first index\n      index = 0;\n      locationStr = state.locations[index];\n    }\n    const shouldAnimate =\n      state.location === undefined\n        ? false // don't animate if we are setting the first location\n        : change.animate !== false;\n    const newState = {\n      ...state,\n      location: locationStr,\n    };\n    const indexChange: Glissando.IndexChange = {\n      index,\n      animate: shouldAnimate,\n    };\n    return setIndex(newState)(indexChange);\n  };\n\ntype IndexLocationChange = (index: number) => number;\n\nconst lookupLocation =\n  (state: Glissando.State) => (changeFn: IndexLocationChange) => {\n    if (!state.locations || !state.location) {\n      return undefined;\n    }\n    const index = state.locations.indexOf(state.location);\n    if (index === -1) {\n      return undefined;\n    }\n    return state.locations[changeFn(index)];\n  };\n\nconst getInitialState = (\n  {\n    index = 0,\n    count = 0,\n    sideViews = 1,\n    location,\n    locations,\n  }: Glissando.InitialState = {} as Glissando.InitialState,\n) => {\n  const slots = Array.from({ length: 1 + sideViews * 2 }, (_, i) => i).map(\n    (_, i) => i - sideViews,\n  );\n  const initialState: Glissando.State = {\n    targetIndex: index,\n    index,\n    count,\n    ...(Array.isArray(locations)\n      ? {\n          locations,\n          count: locations ? locations.length : 0,\n          location: locations[0],\n        }\n      : undefined),\n    ...(location\n      ? {\n          location,\n          index: Array.isArray(locations)\n            ? locations.indexOf(location) || index\n            : index,\n        }\n      : undefined),\n    isAnimating: false,\n    direction: 'ltr', // set by libs glissando-mithril etc\n    slots,\n    sideViews,\n  };\n  initialState.targetIndex = initialState.index;\n  return initialState;\n};\n\nexport const GlissandoModel = (\n  props: Glissando.InitialState = {} as Glissando.InitialState,\n) => {\n  const initialState = getInitialState(props);\n\n  const glissandoState = {\n    initialState,\n    actions: (update: Stream<PatchFn>) => ({\n      previous: ({ animate }: { animate?: boolean } = { animate: true }) => {\n        update((state: Glissando.State) =>\n          setIndex(state)({\n            index: state.index - 1,\n            animate: animate !== false,\n          }),\n        );\n      },\n      next: ({ animate }: { animate?: boolean } = { animate: true }) => {\n        update((state: Glissando.State) =>\n          setIndex(state)({\n            index: state.index + 1,\n            animate: animate !== false,\n          }),\n        );\n      },\n      goTo: ({\n        index,\n        location,\n        animate,\n      }: {\n        index?: number;\n        location?: Glissando.Location;\n        animate?: boolean;\n      }) => {\n        update((state: Glissando.State) => {\n          if (location) {\n            const change: Glissando.LocationChange = {\n              location,\n              animate,\n            };\n            return setLocation(state)(change);\n          }\n          if (index === undefined) {\n            return state;\n          }\n          const change: Glissando.IndexChange = {\n            index,\n            animate,\n          };\n          return setIndex(state)(change);\n        });\n      },\n      finalize: (index: number) => {\n        update((state: Glissando.State) =>\n          setIndex(state)({\n            index,\n            animate: false,\n          }),\n        );\n      },\n      setCount: (count: number) => {\n        update((state: Glissando.State) =>\n          setIndex({\n            ...state,\n            count,\n          })({ index: state.index }),\n        );\n      },\n      setDirection: (direction: Glissando.Direction) => {\n        update((state: Glissando.State) => ({\n          ...state,\n          direction,\n        }));\n      },\n      setLocations: (locations: Glissando.Location[]) => {\n        update((state: Glissando.State) => ({\n          ...state,\n          locations,\n          count: locations.length,\n        }));\n      },\n    }),\n\n    selectors: (states: Stream<Glissando.State>) => ({\n      hasNext: () => {\n        const state = states();\n        return state.index < state.count - 1;\n      },\n      hasPrevious: () => {\n        const state = states();\n        return state.index > 0;\n      },\n      isAnimating: () => {\n        const state = states();\n        return state.isAnimating;\n      },\n      getViewIndices: () => {\n        const state = states();\n        return state.slots.map(slotIndex => {\n          let index = slotIndex + state.index + 0;\n          if (slotIndex < 0 && state.targetIndex < state.index) {\n            index = slotIndex + state.targetIndex + 1;\n          } else if (slotIndex > 0 && state.targetIndex > state.index) {\n            index = slotIndex + state.targetIndex - 1;\n          }\n          return index;\n        });\n      },\n      getLocation: () => {\n        const state = states();\n        return lookupLocation(state)(index => index);\n      },\n      getNextLocation: () => {\n        const state = states();\n        return lookupLocation(state)(index => index + 1);\n      },\n      getPreviousLocation: () => {\n        const state = states();\n        return lookupLocation(state)(index => index - 1);\n      },\n    }),\n  };\n\n  const update: Stream<PatchFn> = Stream<PatchFn>();\n\n  const states: Glissando.States = Stream.scan(\n    (state: Glissando.State, patch: PatchFn) => patch(state),\n    {\n      ...glissandoState.initialState,\n    },\n    update,\n  );\n\n  // Debugging:\n  // states.map(state => console.log(JSON.stringify(state, null, 2)));\n\n  const actions = {\n    ...glissandoState.actions(update),\n  };\n\n  const selectors: Glissando.Selectors = {\n    ...glissandoState.selectors(states),\n  };\n\n  const changedStates: Glissando.ChangedStates = Stream.scan(\n    (state: Glissando.ChangedState, value) =>\n      JSON.stringify(state, null, 2) === JSON.stringify(value, null, 2)\n        ? Stream.SKIP\n        : value,\n    Stream.SKIP,\n    states,\n  );\n\n  const getChanges = Stream.lift(\n    value => value as Glissando.State,\n    changedStates,\n  );\n\n  return {\n    getState: states,\n    getChanges,\n    ...actions,\n    ...selectors,\n  } as Glissando.Model;\n};\n","import type { Glissando } from './types';\n\n/**\n * Returns the classname and style object for the current model state.\n * Usage:\n *\n * const { className, style } = getSliderStyle(getState());\n * ...\n * <div\n *   className={`glissando-slider ${className}`}\n *   style={style}\n * >\n */\nexport const getSliderStyle = (state: Glissando.State) => {\n  const slotCount = 2 * state.sideViews + 1;\n  const slotWidth = 100 / slotCount;\n  const direction = state.direction === 'rtl' ? 1 : -1;\n  let sliderTranslateX: number = direction * slotWidth * (state.sideViews + 0);\n  if (state.targetIndex > state.index) {\n    sliderTranslateX = direction * slotWidth * (state.sideViews + 1);\n  } else if (state.targetIndex < state.index) {\n    sliderTranslateX = direction * slotWidth * (state.sideViews - 1);\n  }\n\n  const style = {\n    width: `calc(${slotCount} * calc(100%))`,\n    transform: `translateX(${sliderTranslateX}%)`,\n    ...(!state.isAnimating\n      ? {\n          transitionDuration: '0ms',\n        }\n      : undefined),\n  };\n  const className = state.isAnimating ? 'glissando-animating' : '';\n  return { style, className };\n};\n"],"names":["_","i","update","change","states","Stream"],"mappings":"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"}