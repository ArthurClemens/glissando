{"version":3,"sources":["webpack:///./styles.css","webpack:///../node_modules/css-loader/dist/glissando-mithril/dist/glissando.min.css","webpack:///../node_modules/css-loader/dist/runtime/api.js","webpack:///../node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack:///../node_modules/mithril/mithril.js","webpack:///../node_modules/mithril/stream/stream.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///../glissando/dist/glissando.mjs","webpack:///../glissando-mithril/dist/glissando-mithril.mjs","webpack:///./Header.ts","webpack:///./Page.ts","webpack:///./App.ts","webpack:///./index.ts"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","concat","join","i","modules","mediaQuery","dedupe","alreadyImportedModules","length","_i","_slicedToArray","arr","Array","isArray","_arrayWithHoles","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","next","done","value","err","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","prototype","call","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","_item","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","Vnode","tag","key","attrs0","children0","text","dom","attrs","children","domSize","state","events","instance","normalize","node","normalizeChildren","String","input","isKeyed","hyperscriptVnode","children1","attrs1","arguments","start","selectorParser","selectorCache","hasOwn","hasOwnProperty","isEmpty","object","compileSelector","selector","match","classes","exec","type","attrValue","replace","className","execSelector","vnode","hasClass","class","newAttrs","hyperscript","view","Error","apply","trust","html","fragment","vnode2","PromisePolyfill","executor","self","resolvers","rejectors","resolveCurrent","handler","rejectCurrent","_instance","callAsync","setImmediate","setTimeout","shouldAbsorb","execute","then","console","error","retry","executeOnce","bind","e","runs","run","fn","onerror","onFulfilled","onRejection","resolveNext","rejectNext","handle","callback","promise","resolve","reject","catch","finally","reason","all","total","count","values","consume","race","window","Promise","g","render","$window","currentRedraw","$doc","document","nameSpace","svg","math","getNameSpace","vnode3","xmlns","checkState","original","callHook","activeElement","createNodes","parent","vnodes","end","hooks","nextSibling","ns","createNode","initLifecycle","createTextNode","insertNode","createText","createHTML","createDocumentFragment","children3","firstChild","childNodes","createFragment","attrs2","is","element","createElementNS","createElement","setAttr","setAttrs","maybeSetContentEditable","textContent","selectedIndex","normalized","setLateSelectAttrs","sentinel","create","$$reentrantLock$$","initComponent","createComponent","possibleParents","caption","thead","tbody","tfoot","tr","th","td","colgroup","col","match0","temp","innerHTML","child","appendChild","updateNodes","old","removeNodes","isOldKeyed","isKeyed0","oldStart","v","oe","ve","topSibling","oldEnd","updateNode","getNextSibling","moveNodes","lisIndices","originalNextSibling","vnodesLength","oldIndices","li","pos","matched","getKeyMap","oldIndex","a","result","u","il","lisTemp","j","c","makeLisIndices","commonLength","removeNode","oldTag","force","onbeforeupdate","shouldNotUpdate","updateLifecycle","nodeValue","updateText","removeHTML","updateHTML","updateFragment","val","removeAttr","updateAttrs","updateElement","updateComponent","frag","moveChildToFrag","parentNode","insertBefore","contenteditable","contentEditable","stateResult","attrsResult","mask","onbeforeremove","reallyRemove","onremove","removeChild","isLifecycleMethod","attr","isFormAttribute","updateEvent","setAttributeNS","updateStyle","hasPropertyKey","setAttribute","removeAttribute","nsLastIndex","indexOf","uppercaseRegex","toLowerCase","capital","normalizeKey","style","cssText","setProperty","removeProperty","EventDict","_","removeEventListener","addEventListener","oninit","oncreate","onupdate","handleEvent","ev","handler0","currentTarget","redraw","preventDefault","stopPropagation","active","namespace","namespaceURI","prevRedraw","focus","_12","mountRedraw0","render0","schedule","subscriptions","rendering","pending","sync","mount","root","component","index","splice","_15","requestAnimationFrame","buildQueryString","args","key2","destructure","value1","assign","target","keys","forEach","key3","buildPathname","template","params","SyntaxError","queryIndex","hashIndex","queryEnd","pathEnd","path","query","resolved","m2","key1","variadic","newQueryIndex","newHashIndex","newQueryEnd","newPathEnd","result0","querystring","request","oncompletion","callbackCount","PromiseProxy","makeRequest","factory","url","promise1","background","complete","wrap","then1","next0","hasHeader","key0","headers","__proto__","replacedAbort","method","toUpperCase","body","assumeJSON","serialize","FormData","responseType","extract","xhr","XMLHttpRequest","aborted","original0","abort","open","async","user","password","setRequestHeader","deserialize","withCredentials","timeout","onreadystatechange","readyState","message","success","status","response","parse","responseText","code","config","send","jsonp","callbackName","Math","round","random","script","src","callbackKey","documentElement","_18","mountRedraw","m","m3","parseQueryString","string","charAt","entries","split","counters","data0","entry","key5","decodeURIComponent","value2","levels","cursor","pop","j0","level","nextLevel","isNumber","isNaN","parseInt","desc","getOwnPropertyDescriptor","parsePathname","queryIndex0","hashIndex0","queryEnd0","pathEnd0","path1","sentinel0","route","mountRedraw00","fireAsync","setPath","path0","options","title","history","replaceState","prefix","pushState","location","href","attrs3","currentPath","lastUpdate","currentResolver","SKIP","defaultRoute","routes","onremove0","compiled","check","templateData","templateKeys","regexp","RegExp","m4","key6","extra","k","r","data1","callAsync0","p","scheduled","defaultData","some","ReferenceError","resolveRoute","hash","search","pathname","fail","loop","payload","matchedRoute","localComp","update","comp","onmatch","vnode5","set","get","Link","onclick","child0","disabled","Boolean","result1","defaultPrevented","button","which","ctrlKey","metaKey","shiftKey","altKey","param","key4","_25","Stream","lift","streams","merge","scan","acc","origin","stream","combine","scanMerge","tuples","seed","tuple","changed","warnedHalt","dependentStreams","dependentFns","_changing","_state","s","createEnd","_parents","_unregisterChild","_map","ignoreInitial","toJSON","x","s1","s2","childIndex","defineProperty","ready","every","mappers","endStream","mapper","log","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","definition","enumerable","globalThis","Function","obj","prop","setIndex","change","newIndex","shouldUpdate","Number","min","calculateNewIndex","animate","targetIndex","isAnimating","lookupLocation","changeFn","locations","GlissandoModel","props","glissandoState","sideViews","slots","initialState","direction","getInitialState","previous","goTo","locationStr","shouldAnimate","newState","indexChange","setLocation","finalize","setCount","setDirection","setLocations","states","hasNext","hasPrevious","getViewIndices","slotIndex","getLocation","getNextLocation","getPreviousLocation","patch","actions","selectors","changedStates","getState","getChanges","GlissandoSlider","initialVnode","model","onTransitionEnd","evt","getComputedStyle","sliderClassName","slotCount","slotWidth","sliderTranslateX","width","transform","transitionDuration","getSliderStyle","viewIndex","Header","_a","previousLocation","nextLocation","goPrevious","goNext","tabIndex","onkeyup","Page","imageNum","imageUrl","pages","to","__spreadArray","Slider","currentPage","getElementById","useGlissandoModel"],"mappings":"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","file":"js/index.js","sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"*:focus {\\n  outline: none;\\n}\\n\\n.content {\\n  width: 100%;\\n}\\n\\n.demo-page img {\\n  width: 100%;\\n}\\n\\n.demo-page {\\n  background: #efefef;\\n  overflow: auto;\\n  font-size: 18px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./styles.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,mBAAmB;EACnB,cAAc;EACd,eAAe;AACjB\",\"sourcesContent\":[\"*:focus {\\n  outline: none;\\n}\\n\\n.content {\\n  width: 100%;\\n}\\n\\n.demo-page img {\\n  width: 100%;\\n}\\n\\n.demo-page {\\n  background: #efefef;\\n  overflow: auto;\\n  font-size: 18px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".glissando{width:100%;height:100%;overflow-x:hidden;-ms-overflow-y:scroll;-ms-overflow-style:none}.glissando-slider{display:flex;height:100%;animation-timing-function:ease-in-out;transition-duration:.3s}.glissando-slider.glissando-animating{pointer-events:none}.glissando-page{width:100%;height:100%;overflow-y:auto;-ms-overflow-style:auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../glissando-mithril/dist/glissando.min.css\"],\"names\":[],\"mappings\":\"AAAA,WAAW,UAAU,CAAC,WAAW,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,uBAAuB,CAAC,kBAAkB,YAAY,CAAC,WAAW,CAAC,qCAAqC,CAAC,uBAAuB,CAAC,sCAAsC,mBAAmB,CAAC,gBAAgB,UAAU,CAAC,WAAW,CAAC,eAAe,CAAC,uBAAuB\",\"sourcesContent\":[\".glissando{width:100%;height:100%;overflow-x:hidden;-ms-overflow-y:scroll;-ms-overflow-style:none}.glissando-slider{display:flex;height:100%;animation-timing-function:ease-in-out;transition-duration:.3s}.glissando-slider.glissando-animating{pointer-events:none}.glissando-page{width:100%;height:100%;overflow-y:auto;-ms-overflow-style:auto}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (typeof btoa === \"function\") {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};",";(function() {\n\"use strict\"\nfunction Vnode(tag, key, attrs0, children0, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs0, children: children0, text: text, dom: dom, domSize: undefined, state: undefined, events: undefined, instance: undefined}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node == null || typeof node === \"boolean\") return null\n\tif (typeof node === \"object\") return node\n\treturn Vnode(\"#\", undefined, undefined, String(node), undefined, undefined)\n}\nVnode.normalizeChildren = function(input) {\n\tvar children0 = []\n\tif (input.length) {\n\t\tvar isKeyed = input[0] != null && input[0].key != null\n\t\t// Note: this is a *very* perf-sensitive check.\n\t\t// Fun fact: merging the loop like this is somehow faster than splitting\n\t\t// it, noticeably so.\n\t\tfor (var i = 1; i < input.length; i++) {\n\t\t\tif ((input[i] != null && input[i].key != null) !== isKeyed) {\n\t\t\t\tthrow new TypeError(\"Vnodes must either always have keys or never have keys!\")\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < input.length; i++) {\n\t\t\tchildren0[i] = Vnode.normalize(input[i])\n\t\t}\n\t}\n\treturn children0\n}\n// Call via `hyperscriptVnode0.apply(startOffset, arguments)`\n//\n// The reason I do it this way, forwarding the arguments and passing the start\n// offset in `this`, is so I don't have to create a temporary array in a\n// performance-critical path.\n//\n// In native ES6, I'd instead add a final `...args` parameter to the\n// `hyperscript0` and `fragment` factories and define this as\n// `hyperscriptVnode0(...args)`, since modern engines do optimize that away. But\n// ES5 (what Mithril requires thanks to IE support) doesn't give me that luxury,\n// and engines aren't nearly intelligent enough to do either of these:\n//\n// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to\n//    another function only to be indexed.\n// 2. Elide an `arguments` allocation when it's passed to any function other\n//    than `Function.prototype.apply` or `Reflect.apply`.\n//\n// In ES6, it'd probably look closer to this (I'd need to profile it, though):\n// var hyperscriptVnode = function(attrs1, ...children1) {\n//     if (attrs1 == null || typeof attrs1 === \"object\" && attrs1.tag == null && !Array.isArray(attrs1)) {\n//         if (children1.length === 1 && Array.isArray(children1[0])) children1 = children1[0]\n//     } else {\n//         children1 = children1.length === 0 && Array.isArray(attrs1) ? attrs1 : [attrs1, ...children1]\n//         attrs1 = undefined\n//     }\n//\n//     if (attrs1 == null) attrs1 = {}\n//     return Vnode(\"\", attrs1.key, attrs1, children1)\n// }\nvar hyperscriptVnode = function() {\n\tvar attrs1 = arguments[this], start = this + 1, children1\n\tif (attrs1 == null) {\n\t\tattrs1 = {}\n\t} else if (typeof attrs1 !== \"object\" || attrs1.tag != null || Array.isArray(attrs1)) {\n\t\tattrs1 = {}\n\t\tstart = this\n\t}\n\tif (arguments.length === start + 1) {\n\t\tchildren1 = arguments[start]\n\t\tif (!Array.isArray(children1)) children1 = [children1]\n\t} else {\n\t\tchildren1 = []\n\t\twhile (start < arguments.length) children1.push(arguments[start++])\n\t}\n\treturn Vnode(\"\", attrs1.key, attrs1, children1)\n}\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\nvar hasOwn = {}.hasOwnProperty\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\nfunction execSelector(state, vnode) {\n\tvar attrs = vnode.attrs\n\tvar children = Vnode.normalizeChildren(vnode.children)\n\tvar hasClass = hasOwn.call(attrs, \"class\")\n\tvar className = hasClass ? attrs.class : attrs.className\n\tvnode.tag = state.tag\n\tvnode.attrs = null\n\tvnode.children = undefined\n\tif (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n\t\tvar newAttrs = {}\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key)) newAttrs[key] = attrs[key]\n\t\t}\n\t\tattrs = newAttrs\n\t}\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key) && key !== \"className\" && !hasOwn.call(attrs, key)){\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className != null || state.attrs.className != null) attrs.className =\n\t\tclassName != null\n\t\t\t? state.attrs.className != null\n\t\t\t\t? String(state.attrs.className) + \" \" + String(className)\n\t\t\t\t: className\n\t\t\t: state.attrs.className != null\n\t\t\t\t? state.attrs.className\n\t\t\t\t: null\n\tif (hasClass) attrs.class = null\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\tvnode.attrs = attrs\n\t\t\tbreak\n\t\t}\n\t}\n\tif (Array.isArray(children) && children.length === 1 && children[0] != null && children[0].tag === \"#\") {\n\t\tvnode.text = children[0].children\n\t} else {\n\t\tvnode.children = children\n\t}\n\treturn vnode\n}\nfunction hyperscript(selector) {\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\tvar vnode = hyperscriptVnode.apply(1, arguments)\n\tif (typeof selector === \"string\") {\n\t\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\t\tif (selector !== \"[\") return execSelector(selectorCache[selector] || compileSelector(selector), vnode)\n\t}\n\tvnode.tag = selector\n\treturn vnode\n}\nhyperscript.trust = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\nhyperscript.fragment = function() {\n\tvar vnode2 = hyperscriptVnode.apply(0, arguments)\n\tvnode2.tag = \"[\"\n\tvnode2.children = Vnode.normalizeChildren(vnode2.children)\n\treturn vnode2\n}\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.prototype.finally = function(callback) {\n\treturn this.then(\n\t\tfunction(value) {\n\t\t\treturn PromisePolyfill.resolve(callback()).then(function() {\n\t\t\t\treturn value\n\t\t\t})\n\t\t},\n\t\tfunction(reason) {\n\t\t\treturn PromisePolyfill.resolve(callback()).then(function() {\n\t\t\t\treturn PromisePolyfill.reject(reason);\n\t\t\t})\n\t\t}\n\t)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\nif (typeof window !== \"undefined\") {\n\tif (typeof window.Promise === \"undefined\") {\n\t\twindow.Promise = PromisePolyfill\n\t} else if (!window.Promise.prototype.finally) {\n\t\twindow.Promise.prototype.finally = PromisePolyfill.prototype.finally\n\t}\n\tvar PromisePolyfill = window.Promise\n} else if (typeof global !== \"undefined\") {\n\tif (typeof global.Promise === \"undefined\") {\n\t\tglobal.Promise = PromisePolyfill\n\t} else if (!global.Promise.prototype.finally) {\n\t\tglobal.Promise.prototype.finally = PromisePolyfill.prototype.finally\n\t}\n\tvar PromisePolyfill = global.Promise\n} else {\n}\nvar _12 = function($window) {\n\tvar $doc = $window && $window.document\n\tvar currentRedraw\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\tfunction getNameSpace(vnode3) {\n\t\treturn vnode3.attrs && vnode3.attrs.xmlns || nameSpace[vnode3.tag]\n\t}\n\t//sanity check to discourage people from doing `vnode3.state = ...`\n\tfunction checkState(vnode3, original) {\n\t\tif (vnode3.state !== original) throw new Error(\"`vnode.state` must not be modified\")\n\t}\n\t//Note: the hook is passed as the `this` argument to allow proxying the\n\t//arguments without requiring a full array allocation to do so. It also\n\t//takes advantage of the fact the current `vnode3` is the first argument in\n\t//all lifecycle methods.\n\tfunction callHook(vnode3) {\n\t\tvar original = vnode3.state\n\t\ttry {\n\t\t\treturn this.apply(original, arguments)\n\t\t} finally {\n\t\t\tcheckState(vnode3, original)\n\t\t}\n\t}\n\t// IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when\n\t// inside an iframe. Catch and swallow this error, and heavy-handidly return null.\n\tfunction activeElement() {\n\t\ttry {\n\t\t\treturn $doc.activeElement\n\t\t} catch (e) {\n\t\t\treturn null\n\t\t}\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode3 = vnodes[i]\n\t\t\tif (vnode3 != null) {\n\t\t\t\tcreateNode(parent, vnode3, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode3, hooks, ns, nextSibling) {\n\t\tvar tag = vnode3.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode3.state = {}\n\t\t\tif (vnode3.attrs != null) initLifecycle(vnode3.attrs, vnode3, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": createText(parent, vnode3, nextSibling); break\n\t\t\t\tcase \"<\": createHTML(parent, vnode3, ns, nextSibling); break\n\t\t\t\tcase \"[\": createFragment(parent, vnode3, hooks, ns, nextSibling); break\n\t\t\t\tdefault: createElement(parent, vnode3, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse createComponent(parent, vnode3, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode3, nextSibling) {\n\t\tvnode3.dom = $doc.createTextNode(vnode3.children)\n\t\tinsertNode(parent, vnode3.dom, nextSibling)\n\t}\n\tvar possibleParents = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}\n\tfunction createHTML(parent, vnode3, ns, nextSibling) {\n\t\tvar match0 = vnode3.children.match(/^\\s*?<(\\w+)/im) || []\n\t\t// not using the proper parent makes the child element(s) vanish.\n\t\t//     var div = document.createElement(\"div\")\n\t\t//     div.innerHTML = \"<td>i</td><td>j</td>\"\n\t\t//     console.log(div.innerHTML)\n\t\t// --> \"ij\", no <td> in sight.\n\t\tvar temp = $doc.createElement(possibleParents[match0[1]] || \"div\")\n\t\tif (ns === \"http://www.w3.org/2000/svg\") {\n\t\t\ttemp.innerHTML = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">\" + vnode3.children + \"</svg>\"\n\t\t\ttemp = temp.firstChild\n\t\t} else {\n\t\t\ttemp.innerHTML = vnode3.children\n\t\t}\n\t\tvnode3.dom = temp.firstChild\n\t\tvnode3.domSize = temp.childNodes.length\n\t\t// Capture nodes to remove, so we don't confuse them.\n\t\tvnode3.instance = []\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tvnode3.instance.push(child)\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertNode(parent, fragment, nextSibling)\n\t}\n\tfunction createFragment(parent, vnode3, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode3.children != null) {\n\t\t\tvar children3 = vnode3.children\n\t\t\tcreateNodes(fragment, children3, 0, children3.length, hooks, null, ns)\n\t\t}\n\t\tvnode3.dom = fragment.firstChild\n\t\tvnode3.domSize = fragment.childNodes.length\n\t\tinsertNode(parent, fragment, nextSibling)\n\t}\n\tfunction createElement(parent, vnode3, hooks, ns, nextSibling) {\n\t\tvar tag = vnode3.tag\n\t\tvar attrs2 = vnode3.attrs\n\t\tvar is = attrs2 && attrs2.is\n\t\tns = getNameSpace(vnode3) || ns\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode3.dom = element\n\t\tif (attrs2 != null) {\n\t\t\tsetAttrs(vnode3, attrs2, ns)\n\t\t}\n\t\tinsertNode(parent, element, nextSibling)\n\t\tif (!maybeSetContentEditable(vnode3)) {\n\t\t\tif (vnode3.text != null) {\n\t\t\t\tif (vnode3.text !== \"\") element.textContent = vnode3.text\n\t\t\t\telse vnode3.children = [Vnode(\"#\", undefined, undefined, vnode3.text, undefined, undefined)]\n\t\t\t}\n\t\t\tif (vnode3.children != null) {\n\t\t\t\tvar children3 = vnode3.children\n\t\t\t\tcreateNodes(element, children3, 0, children3.length, hooks, null, ns)\n\t\t\t\tif (vnode3.tag === \"select\" && attrs2 != null) setLateSelectAttrs(vnode3, attrs2)\n\t\t\t}\n\t\t}\n\t}\n\tfunction initComponent(vnode3, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode3.tag.view === \"function\") {\n\t\t\tvnode3.state = Object.create(vnode3.tag)\n\t\t\tsentinel = vnode3.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode3.state = void 0\n\t\t\tsentinel = vnode3.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode3.state = (vnode3.tag.prototype != null && typeof vnode3.tag.prototype.view === \"function\") ? new vnode3.tag(vnode3) : vnode3.tag(vnode3)\n\t\t}\n\t\tinitLifecycle(vnode3.state, vnode3, hooks)\n\t\tif (vnode3.attrs != null) initLifecycle(vnode3.attrs, vnode3, hooks)\n\t\tvnode3.instance = Vnode.normalize(callHook.call(vnode3.state.view, vnode3))\n\t\tif (vnode3.instance === vnode3) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode3, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode3, hooks)\n\t\tif (vnode3.instance != null) {\n\t\t\tcreateNode(parent, vnode3.instance, hooks, ns, nextSibling)\n\t\t\tvnode3.dom = vnode3.instance.dom\n\t\t\tvnode3.domSize = vnode3.dom != null ? vnode3.instance.domSize : 0\n\t\t}\n\t\telse {\n\t\t\tvnode3.domSize = 0\n\t\t}\n\t}\n\t//update\n\t/**\n\t * @param {Element|Fragment} parent - the parent element\n\t * @param {Vnode[] | null} old - the list of vnodes of the last `render0()` call for\n\t *                               this part of the tree\n\t * @param {Vnode[] | null} vnodes - as above, but for the current `render0()` call.\n\t * @param {Function[]} hooks - an accumulator of post-render0 hooks (oncreate/onupdate)\n\t * @param {Element | null} nextSibling - the next DOM node if we're dealing with a\n\t *                                       fragment that is not the last item in its\n\t *                                       parent\n\t * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any\n\t * @returns void\n\t */\n\t// This function diffs and patches lists of vnodes, both keyed and unkeyed.\n\t//\n\t// We will:\n\t//\n\t// 1. describe its general structure\n\t// 2. focus on the diff algorithm optimizations\n\t// 3. discuss DOM node operations.\n\t// ## Overview:\n\t//\n\t// The updateNodes() function:\n\t// - deals with trivial cases\n\t// - determines whether the lists are keyed or unkeyed based on the first non-null node\n\t//   of each list.\n\t// - diffs them and patches the DOM if needed (that's the brunt of the code)\n\t// - manages the leftovers: after diffing, are there:\n\t//   - old nodes left to remove?\n\t// \t - new nodes to insert?\n\t// \t deal with them!\n\t//\n\t// The lists are only iterated over once, with an exception for the nodes in `old` that\n\t// are visited in the fourth part of the diff and in the `removeNodes` loop.\n\t// ## Diffing\n\t//\n\t// Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837\n\t// may be good for context on longest increasing subsequence-based logic for moving nodes.\n\t//\n\t// In order to diff keyed lists, one has to\n\t//\n\t// 1) match0 nodes in both lists, per key, and update them accordingly\n\t// 2) create the nodes present in the new list, but absent in the old one\n\t// 3) remove the nodes present in the old list, but absent in the new one\n\t// 4) figure out what nodes in 1) to move in order to minimize the DOM operations.\n\t//\n\t// To achieve 1) one can create a dictionary of keys => index (for the old list), then0 iterate\n\t// over the new list and for each new vnode3, find the corresponding vnode3 in the old list using\n\t// the map.\n\t// 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new\n\t// and must be created.\n\t// For the removals, we actually remove the nodes that have been updated from the old list.\n\t// The nodes that remain in that list after 1) and 2) have been performed can be safely removed.\n\t// The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)\n\t// algorithm.\n\t//\n\t// the longest increasing subsequence is the list of nodes that can remain in place. Imagine going\n\t// from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices\n\t// corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would\n\t//  match0 the above lists, for example).\n\t//\n\t// In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We\n\t// can update those nodes without moving them, and only call `insertNode` on `4` and `5`.\n\t//\n\t// @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually\n\t// the longest increasing subsequence *of old nodes still present in the new list*).\n\t//\n\t// It is a general algorithm that is fireproof in all circumstances, but it requires the allocation\n\t// and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,\n\t// the `LIS` and a temporary one to create the LIS).\n\t//\n\t// So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of\n\t// the LIS and can be updated without moving them.\n\t//\n\t// If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with\n\t// the exception of the last node if the list is fully reversed).\n\t//\n\t// ## Finding the next sibling.\n\t//\n\t// `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.\n\t// When the list is being traversed top-down, at any index, the DOM nodes up to the previous\n\t// vnode3 reflect the content of the new list, whereas the rest of the DOM nodes reflect the old\n\t// list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.\n\t//\n\t// In the other scenarios (swaps, upwards traversal, map-based diff),\n\t// the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the\n\t// bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node\n\t// as the next sibling (cached in the `nextSibling` variable).\n\t// ## DOM node moves\n\t//\n\t// In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,\n\t// this is not the case if the node moved (second and fourth part of the diff algo). We move\n\t// the old DOM nodes before updateNode runs0 because it enables us to use the cached `nextSibling`\n\t// variable rather than fetching it using `getNextSibling()`.\n\t//\n\t// The fourth part of the diff currently inserts nodes unconditionally, leading to issues\n\t// like #1791 and #1999. We need to be smarter about those situations where adjascent old\n\t// nodes remain together in the new list in a way that isn't covered by parts one and\n\t// three of the diff algo.\n\tfunction updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null || old.length === 0) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null || vnodes.length === 0) removeNodes(parent, old, 0, old.length)\n\t\telse {\n\t\t\tvar isOldKeyed = old[0] != null && old[0].key != null\n\t\t\tvar isKeyed0 = vnodes[0] != null && vnodes[0].key != null\n\t\t\tvar start = 0, oldStart = 0\n\t\t\tif (!isOldKeyed) while (oldStart < old.length && old[oldStart] == null) oldStart++\n\t\t\tif (!isKeyed0) while (start < vnodes.length && vnodes[start] == null) start++\n\t\t\tif (isKeyed0 === null && isOldKeyed == null) return // both lists are full of nulls\n\t\t\tif (isOldKeyed !== isKeyed0) {\n\t\t\t\tremoveNodes(parent, old, oldStart, old.length)\n\t\t\t\tcreateNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else if (!isKeyed0) {\n\t\t\t\t// Don't index past the end of either list (causes deopts).\n\t\t\t\tvar commonLength = old.length < vnodes.length ? old.length : vnodes.length\n\t\t\t\t// Rewind if necessary to the first non-null index on either side.\n\t\t\t\t// We could alternatively either explicitly create or remove nodes when `start !== oldStart`\n\t\t\t\t// but that would be optimizing for sparse lists which are more rare than dense ones.\n\t\t\t\tstart = start < oldStart ? start : oldStart\n\t\t\t\tfor (; start < commonLength; start++) {\n\t\t\t\t\to = old[start]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o === v || o == null && v == null) continue\n\t\t\t\t\telse if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling))\n\t\t\t\t\telse if (v == null) removeNode(parent, o)\n\t\t\t\t\telse updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\tif (old.length > commonLength) removeNodes(parent, old, start, old.length)\n\t\t\t\tif (vnodes.length > commonLength) createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else {\n\t\t\t\t// keyed diff\n\t\t\t\tvar oldEnd = old.length - 1, end = vnodes.length - 1, map, o, v, oe, ve, topSibling\n\t\t\t\t// bottom-up\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\t// top-down\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o.key !== v.key) break\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tif (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\t// swaps and list reversals\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (start === end) break\n\t\t\t\t\tif (o.key !== ve.key || oe.key !== v.key) break\n\t\t\t\t\ttopSibling = getNextSibling(old, oldStart, nextSibling)\n\t\t\t\t\tmoveNodes(parent, oe, topSibling)\n\t\t\t\t\tif (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns)\n\t\t\t\t\tif (++start <= --end) moveNodes(parent, o, nextSibling)\n\t\t\t\t\tif (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldStart++; oldEnd--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t}\n\t\t\t\t// bottom up once again\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t}\n\t\t\t\tif (start > end) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\telse if (oldStart > oldEnd) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\telse {\n\t\t\t\t\t// inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul\n\t\t\t\t\tvar originalNextSibling = nextSibling, vnodesLength = end - start + 1, oldIndices = new Array(vnodesLength), li=0, i=0, pos = 2147483647, matched = 0, map, lisIndices\n\t\t\t\t\tfor (i = 0; i < vnodesLength; i++) oldIndices[i] = -1\n\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\tif (map == null) map = getKeyMap(old, oldStart, oldEnd + 1)\n\t\t\t\t\t\tve = vnodes[i]\n\t\t\t\t\t\tvar oldIndex = map[ve.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tpos = (oldIndex < pos) ? oldIndex : -1 // becomes -1 if nodes were re-ordered\n\t\t\t\t\t\t\toldIndices[i-start] = oldIndex\n\t\t\t\t\t\t\toe = old[oldIndex]\n\t\t\t\t\t\t\told[oldIndex] = null\n\t\t\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\t\tmatched++\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tnextSibling = originalNextSibling\n\t\t\t\t\tif (matched !== oldEnd - oldStart + 1) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\t\tif (matched === 0) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (pos === -1) {\n\t\t\t\t\t\t\t// the indices of the indices of the items that are part of the\n\t\t\t\t\t\t\t// longest increasing subsequence in the oldIndices list\n\t\t\t\t\t\t\tlisIndices = makeLisIndices(oldIndices)\n\t\t\t\t\t\t\tli = lisIndices.length - 1\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tif (lisIndices[li] === i - start) li--\n\t\t\t\t\t\t\t\t\telse moveNodes(parent, v, nextSibling)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode3, hooks, nextSibling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode3.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode3.state = old.state\n\t\t\tvnode3.events = old.events\n\t\t\tif (shouldNotUpdate(vnode3, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode3.attrs != null) {\n\t\t\t\t\tupdateLifecycle(vnode3.attrs, vnode3, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode3); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode3, ns, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode3, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode3, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode3, hooks, nextSibling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(parent, old)\n\t\t\tcreateNode(parent, vnode3, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode3) {\n\t\tif (old.children.toString() !== vnode3.children.toString()) {\n\t\t\told.dom.nodeValue = vnode3.children\n\t\t}\n\t\tvnode3.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode3, ns, nextSibling) {\n\t\tif (old.children !== vnode3.children) {\n\t\t\tremoveHTML(parent, old)\n\t\t\tcreateHTML(parent, vnode3, ns, nextSibling)\n\t\t}\n\t\telse {\n\t\t\tvnode3.dom = old.dom\n\t\t\tvnode3.domSize = old.domSize\n\t\t\tvnode3.instance = old.instance\n\t\t}\n\t}\n\tfunction updateFragment(parent, old, vnode3, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode3.children, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children3 = vnode3.children\n\t\tvnode3.dom = null\n\t\tif (children3 != null) {\n\t\t\tfor (var i = 0; i < children3.length; i++) {\n\t\t\t\tvar child = children3[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode3.dom == null) vnode3.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode3.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode3, hooks, ns) {\n\t\tvar element = vnode3.dom = old.dom\n\t\tns = getNameSpace(vnode3) || ns\n\t\tif (vnode3.tag === \"textarea\") {\n\t\t\tif (vnode3.attrs == null) vnode3.attrs = {}\n\t\t\tif (vnode3.text != null) {\n\t\t\t\tvnode3.attrs.value = vnode3.text //FIXME handle0 multiple children3\n\t\t\t\tvnode3.text = undefined\n\t\t\t}\n\t\t}\n\t\tupdateAttrs(vnode3, old.attrs, vnode3.attrs, ns)\n\t\tif (!maybeSetContentEditable(vnode3)) {\n\t\t\tif (old.text != null && vnode3.text != null && vnode3.text !== \"\") {\n\t\t\t\tif (old.text.toString() !== vnode3.text.toString()) old.dom.firstChild.nodeValue = vnode3.text\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)]\n\t\t\t\tif (vnode3.text != null) vnode3.children = [Vnode(\"#\", undefined, undefined, vnode3.text, undefined, undefined)]\n\t\t\t\tupdateNodes(element, old.children, vnode3.children, hooks, null, ns)\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode3, hooks, nextSibling, ns) {\n\t\tvnode3.instance = Vnode.normalize(callHook.call(vnode3.state.view, vnode3))\n\t\tif (vnode3.instance === vnode3) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tupdateLifecycle(vnode3.state, vnode3, hooks)\n\t\tif (vnode3.attrs != null) updateLifecycle(vnode3.attrs, vnode3, hooks)\n\t\tif (vnode3.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode3.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode3.instance, hooks, nextSibling, ns)\n\t\t\tvnode3.dom = vnode3.instance.dom\n\t\t\tvnode3.domSize = vnode3.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(parent, old.instance)\n\t\t\tvnode3.dom = undefined\n\t\t\tvnode3.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode3.dom = old.dom\n\t\t\tvnode3.domSize = old.domSize\n\t\t}\n\t}\n\tfunction getKeyMap(vnodes, start, end) {\n\t\tvar map = Object.create(null)\n\t\tfor (; start < end; start++) {\n\t\t\tvar vnode3 = vnodes[start]\n\t\t\tif (vnode3 != null) {\n\t\t\t\tvar key = vnode3.key\n\t\t\t\tif (key != null) map[key] = start\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\t// Lifted from ivi https://github.com/ivijs/ivi/\n\t// takes a list of unique numbers (-1 is special and can\n\t// occur multiple times) and returns an array with the indices\n\t// of the items that are part of the longest increasing\n\t// subsequece\n\tvar lisTemp = []\n\tfunction makeLisIndices(a) {\n\t\tvar result = [0]\n\t\tvar u = 0, v = 0, i = 0\n\t\tvar il = lisTemp.length = a.length\n\t\tfor (var i = 0; i < il; i++) lisTemp[i] = a[i]\n\t\tfor (var i = 0; i < il; ++i) {\n\t\t\tif (a[i] === -1) continue\n\t\t\tvar j = result[result.length - 1]\n\t\t\tif (a[j] < a[i]) {\n\t\t\t\tlisTemp[i] = j\n\t\t\t\tresult.push(i)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tu = 0\n\t\t\tv = result.length - 1\n\t\t\twhile (u < v) {\n\t\t\t\t// Fast integer average without overflow.\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tvar c = (u >>> 1) + (v >>> 1) + (u & v & 1)\n\t\t\t\tif (a[result[c]] < a[i]) {\n\t\t\t\t\tu = c + 1\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tv = c\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (a[i] < a[result[u]]) {\n\t\t\t\tif (u > 0) lisTemp[i] = result[u - 1]\n\t\t\t\tresult[u] = i\n\t\t\t}\n\t\t}\n\t\tu = result.length\n\t\tv = result[u - 1]\n\t\twhile (u-- > 0) {\n\t\t\tresult[u] = v\n\t\t\tv = lisTemp[v]\n\t\t}\n\t\tlisTemp.length = 0\n\t\treturn result\n\t}\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\t// This covers a really specific edge case:\n\t// - Parent node is keyed and contains child\n\t// - Child is removed, returns unresolved promise0 in `onbeforeremove`\n\t// - Parent node is moved in keyed diff\n\t// - Remaining children3 still need moved appropriately\n\t//\n\t// Ideally, I'd track removed nodes as well, but that introduces a lot more\n\t// complexity and I'm0 not exactly interested in doing that.\n\tfunction moveNodes(parent, vnode3, nextSibling) {\n\t\tvar frag = $doc.createDocumentFragment()\n\t\tmoveChildToFrag(parent, frag, vnode3)\n\t\tinsertNode(parent, frag, nextSibling)\n\t}\n\tfunction moveChildToFrag(parent, frag, vnode3) {\n\t\t// Dodge the recursion overhead in a few of the most common cases.\n\t\twhile (vnode3.dom != null && vnode3.dom.parentNode === parent) {\n\t\t\tif (typeof vnode3.tag !== \"string\") {\n\t\t\t\tvnode3 = vnode3.instance\n\t\t\t\tif (vnode3 != null) continue\n\t\t\t} else if (vnode3.tag === \"<\") {\n\t\t\t\tfor (var i = 0; i < vnode3.instance.length; i++) {\n\t\t\t\t\tfrag.appendChild(vnode3.instance[i])\n\t\t\t\t}\n\t\t\t} else if (vnode3.tag !== \"[\") {\n\t\t\t\t// Don't recurse for text nodes *or* elements, just fragments\n\t\t\t\tfrag.appendChild(vnode3.dom)\n\t\t\t} else if (vnode3.children.length === 1) {\n\t\t\t\tvnode3 = vnode3.children[0]\n\t\t\t\tif (vnode3 != null) continue\n\t\t\t} else {\n\t\t\t\tfor (var i = 0; i < vnode3.children.length; i++) {\n\t\t\t\t\tvar child = vnode3.children[i]\n\t\t\t\t\tif (child != null) moveChildToFrag(parent, frag, child)\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\t}\n\t}\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling != null) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\tfunction maybeSetContentEditable(vnode3) {\n\t\tif (vnode3.attrs == null || (\n\t\t\tvnode3.attrs.contenteditable == null && // attribute\n\t\t\tvnode3.attrs.contentEditable == null // property\n\t\t)) return false\n\t\tvar children3 = vnode3.children\n\t\tif (children3 != null && children3.length === 1 && children3[0].tag === \"<\") {\n\t\t\tvar content = children3[0].children\n\t\t\tif (vnode3.dom.innerHTML !== content) vnode3.dom.innerHTML = content\n\t\t}\n\t\telse if (vnode3.text != null || children3 != null && children3.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\")\n\t\treturn true\n\t}\n\t//remove\n\tfunction removeNodes(parent, vnodes, start, end) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode3 = vnodes[i]\n\t\t\tif (vnode3 != null) removeNode(parent, vnode3)\n\t\t}\n\t}\n\tfunction removeNode(parent, vnode3) {\n\t\tvar mask = 0\n\t\tvar original = vnode3.state\n\t\tvar stateResult, attrsResult\n\t\tif (typeof vnode3.tag !== \"string\" && typeof vnode3.state.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode3.state.onbeforeremove, vnode3)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\tmask = 1\n\t\t\t\tstateResult = result\n\t\t\t}\n\t\t}\n\t\tif (vnode3.attrs && typeof vnode3.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode3.attrs.onbeforeremove, vnode3)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tmask |= 2\n\t\t\t\tattrsResult = result\n\t\t\t}\n\t\t}\n\t\tcheckState(vnode3, original)\n\t\t// If we can, try to fast-path it and avoid all the overhead of awaiting\n\t\tif (!mask) {\n\t\t\tonremove(vnode3)\n\t\t\tremoveChild(parent, vnode3)\n\t\t} else {\n\t\t\tif (stateResult != null) {\n\t\t\t\tvar next = function () {\n\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\tif (mask & 1) { mask &= 2; if (!mask) reallyRemove() }\n\t\t\t\t}\n\t\t\t\tstateResult.then(next, next)\n\t\t\t}\n\t\t\tif (attrsResult != null) {\n\t\t\t\tvar next = function () {\n\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\tif (mask & 2) { mask &= 1; if (!mask) reallyRemove() }\n\t\t\t\t}\n\t\t\t\tattrsResult.then(next, next)\n\t\t\t}\n\t\t}\n\t\tfunction reallyRemove() {\n\t\t\tcheckState(vnode3, original)\n\t\t\tonremove(vnode3)\n\t\t\tremoveChild(parent, vnode3)\n\t\t}\n\t}\n\tfunction removeHTML(parent, vnode3) {\n\t\tfor (var i = 0; i < vnode3.instance.length; i++) {\n\t\t\tparent.removeChild(vnode3.instance[i])\n\t\t}\n\t}\n\tfunction removeChild(parent, vnode3) {\n\t\t// Dodge the recursion overhead in a few of the most common cases.\n\t\twhile (vnode3.dom != null && vnode3.dom.parentNode === parent) {\n\t\t\tif (typeof vnode3.tag !== \"string\") {\n\t\t\t\tvnode3 = vnode3.instance\n\t\t\t\tif (vnode3 != null) continue\n\t\t\t} else if (vnode3.tag === \"<\") {\n\t\t\t\tremoveHTML(parent, vnode3)\n\t\t\t} else {\n\t\t\t\tif (vnode3.tag !== \"[\") {\n\t\t\t\t\tparent.removeChild(vnode3.dom)\n\t\t\t\t\tif (!Array.isArray(vnode3.children)) break\n\t\t\t\t}\n\t\t\t\tif (vnode3.children.length === 1) {\n\t\t\t\t\tvnode3 = vnode3.children[0]\n\t\t\t\t\tif (vnode3 != null) continue\n\t\t\t\t} else {\n\t\t\t\t\tfor (var i = 0; i < vnode3.children.length; i++) {\n\t\t\t\t\t\tvar child = vnode3.children[i]\n\t\t\t\t\t\tif (child != null) removeChild(parent, child)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\t}\n\t}\n\tfunction onremove(vnode3) {\n\t\tif (typeof vnode3.tag !== \"string\" && typeof vnode3.state.onremove === \"function\") callHook.call(vnode3.state.onremove, vnode3)\n\t\tif (vnode3.attrs && typeof vnode3.attrs.onremove === \"function\") callHook.call(vnode3.attrs.onremove, vnode3)\n\t\tif (typeof vnode3.tag !== \"string\") {\n\t\t\tif (vnode3.instance != null) onremove(vnode3.instance)\n\t\t} else {\n\t\t\tvar children3 = vnode3.children\n\t\t\tif (Array.isArray(children3)) {\n\t\t\t\tfor (var i = 0; i < children3.length; i++) {\n\t\t\t\t\tvar child = children3[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//attrs2\n\tfunction setAttrs(vnode3, attrs2, ns) {\n\t\tfor (var key in attrs2) {\n\t\t\tsetAttr(vnode3, key, null, attrs2[key], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode3, key, old, value, ns) {\n\t\tif (key === \"key\" || key === \"is\" || value == null || isLifecycleMethod(key) || (old === value && !isFormAttribute(vnode3, key)) && typeof value !== \"object\") return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") return updateEvent(vnode3, key, value)\n\t\tif (key.slice(0, 6) === \"xlink:\") vnode3.dom.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(6), value)\n\t\telse if (key === \"style\") updateStyle(vnode3.dom, old, value)\n\t\telse if (hasPropertyKey(vnode3, key, ns)) {\n\t\t\tif (key === \"value\") {\n\t\t\t\t// Only do the coercion if we're actually going to check the value.\n\t\t\t\t/* eslint-disable no-implicit-coercion */\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\tif ((vnode3.tag === \"input\" || vnode3.tag === \"textarea\") && vnode3.dom.value === \"\" + value && vnode3.dom === activeElement()) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode3.tag === \"select\" && old !== null && vnode3.dom.value === \"\" + value) return\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode3.tag === \"option\" && old !== null && vnode3.dom.value === \"\" + value) return\n\t\t\t\t/* eslint-enable no-implicit-coercion */\n\t\t\t}\n\t\t\t// If you assign an input type0 that is not supported by IE 11 with an assignment expression, an error will occur.\n\t\t\tif (vnode3.tag === \"input\" && key === \"type\") vnode3.dom.setAttribute(key, value)\n\t\t\telse vnode3.dom[key] = value\n\t\t} else {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) vnode3.dom.setAttribute(key, \"\")\n\t\t\t\telse vnode3.dom.removeAttribute(key)\n\t\t\t}\n\t\t\telse vnode3.dom.setAttribute(key === \"className\" ? \"class\" : key, value)\n\t\t}\n\t}\n\tfunction removeAttr(vnode3, key, old, ns) {\n\t\tif (key === \"key\" || key === \"is\" || old == null || isLifecycleMethod(key)) return\n\t\tif (key[0] === \"o\" && key[1] === \"n\" && !isLifecycleMethod(key)) updateEvent(vnode3, key, undefined)\n\t\telse if (key === \"style\") updateStyle(vnode3.dom, old, null)\n\t\telse if (\n\t\t\thasPropertyKey(vnode3, key, ns)\n\t\t\t&& key !== \"className\"\n\t\t\t&& !(key === \"value\" && (\n\t\t\t\tvnode3.tag === \"option\"\n\t\t\t\t|| vnode3.tag === \"select\" && vnode3.dom.selectedIndex === -1 && vnode3.dom === activeElement()\n\t\t\t))\n\t\t\t&& !(vnode3.tag === \"input\" && key === \"type\")\n\t\t) {\n\t\t\tvnode3.dom[key] = null\n\t\t} else {\n\t\t\tvar nsLastIndex = key.indexOf(\":\")\n\t\t\tif (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1)\n\t\t\tif (old !== false) vnode3.dom.removeAttribute(key === \"className\" ? \"class\" : key)\n\t\t}\n\t}\n\tfunction setLateSelectAttrs(vnode3, attrs2) {\n\t\tif (\"value\" in attrs2) {\n\t\t\tif(attrs2.value === null) {\n\t\t\t\tif (vnode3.dom.selectedIndex !== -1) vnode3.dom.value = null\n\t\t\t} else {\n\t\t\t\tvar normalized = \"\" + attrs2.value // eslint-disable-line no-implicit-coercion\n\t\t\t\tif (vnode3.dom.value !== normalized || vnode3.dom.selectedIndex === -1) {\n\t\t\t\t\tvnode3.dom.value = normalized\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (\"selectedIndex\" in attrs2) setAttr(vnode3, \"selectedIndex\", null, attrs2.selectedIndex, undefined)\n\t}\n\tfunction updateAttrs(vnode3, old, attrs2, ns) {\n\t\tif (attrs2 != null) {\n\t\t\tfor (var key in attrs2) {\n\t\t\t\tsetAttr(vnode3, key, old && old[key], attrs2[key], ns)\n\t\t\t}\n\t\t}\n\t\tvar val\n\t\tif (old != null) {\n\t\t\tfor (var key in old) {\n\t\t\t\tif (((val = old[key]) != null) && (attrs2 == null || attrs2[key] == null)) {\n\t\t\t\t\tremoveAttr(vnode3, key, val, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode3, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode3.dom === activeElement() || vnode3.tag === \"option\" && vnode3.dom.parentNode === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction hasPropertyKey(vnode3, key, ns) {\n\t\t// Filter out namespaced keys\n\t\treturn ns === undefined && (\n\t\t\t// If it's a custom element, just keep it.\n\t\t\tvnode3.tag.indexOf(\"-\") > -1 || vnode3.attrs != null && vnode3.attrs.is ||\n\t\t\t// If it's a normal element, let's try to avoid a few browser bugs.\n\t\t\tkey !== \"href\" && key !== \"list\" && key !== \"form\" && key !== \"width\" && key !== \"height\"// && key !== \"type\"\n\t\t\t// Defer the property check until *after* we check everything.\n\t\t) && key in vnode3.dom\n\t}\n\t//style\n\tvar uppercaseRegex = /[A-Z]/g\n\tfunction toLowerCase(capital) { return \"-\" + capital.toLowerCase() }\n\tfunction normalizeKey(key) {\n\t\treturn key[0] === \"-\" && key[1] === \"-\" ? key :\n\t\t\tkey === \"cssFloat\" ? \"float\" :\n\t\t\t\tkey.replace(uppercaseRegex, toLowerCase)\n\t}\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) {\n\t\t\t// Styles are equivalent, do nothing.\n\t\t} else if (style == null) {\n\t\t\t// New style is missing, just clear it.\n\t\t\telement.style.cssText = \"\"\n\t\t} else if (typeof style !== \"object\") {\n\t\t\t// New style is a string, let engine deal with patching.\n\t\t\telement.style.cssText = style\n\t\t} else if (old == null || typeof old !== \"object\") {\n\t\t\t// `old` is missing or a string, `style` is an object.\n\t\t\telement.style.cssText = \"\"\n\t\t\t// Add new style properties\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null) element.style.setProperty(normalizeKey(key), String(value))\n\t\t\t}\n\t\t} else {\n\t\t\t// Both old & new are (different) objects.\n\t\t\t// Update style properties that have changed\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null && (value = String(value)) !== String(old[key])) {\n\t\t\t\t\telement.style.setProperty(normalizeKey(key), value)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove style properties that no longer exist\n\t\t\tfor (var key in old) {\n\t\t\t\tif (old[key] != null && style[key] == null) {\n\t\t\t\t\telement.style.removeProperty(normalizeKey(key))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Here's an explanation of how this works:\n\t// 1. The event names are always (by design) prefixed by `on`.\n\t// 2. The EventListener interface accepts either a function or an object\n\t//    with a `handleEvent` method.\n\t// 3. The object does not inherit from `Object.prototype`, to avoid\n\t//    any potential interference with that (e.g. setters).\n\t// 4. The event name is remapped to the handler0 before calling it.\n\t// 5. In function-based event handlers, `ev.target === this`. We replicate\n\t//    that below.\n\t// 6. In function-based event handlers, `return false` prevents the default\n\t//    action and stops event propagation. We replicate that below.\n\tfunction EventDict() {\n\t\t// Save this, so the current redraw is correctly tracked.\n\t\tthis._ = currentRedraw\n\t}\n\tEventDict.prototype = Object.create(null)\n\tEventDict.prototype.handleEvent = function (ev) {\n\t\tvar handler0 = this[\"on\" + ev.type]\n\t\tvar result\n\t\tif (typeof handler0 === \"function\") result = handler0.call(ev.currentTarget, ev)\n\t\telse if (typeof handler0.handleEvent === \"function\") handler0.handleEvent(ev)\n\t\tif (this._ && ev.redraw !== false) (0, this._)()\n\t\tif (result === false) {\n\t\t\tev.preventDefault()\n\t\t\tev.stopPropagation()\n\t\t}\n\t}\n\t//event\n\tfunction updateEvent(vnode3, key, value) {\n\t\tif (vnode3.events != null) {\n\t\t\tif (vnode3.events[key] === value) return\n\t\t\tif (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\t\tif (vnode3.events[key] == null) vnode3.dom.addEventListener(key.slice(2), vnode3.events, false)\n\t\t\t\tvnode3.events[key] = value\n\t\t\t} else {\n\t\t\t\tif (vnode3.events[key] != null) vnode3.dom.removeEventListener(key.slice(2), vnode3.events, false)\n\t\t\t\tvnode3.events[key] = undefined\n\t\t\t}\n\t\t} else if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\tvnode3.events = new EventDict()\n\t\t\tvnode3.dom.addEventListener(key.slice(2), vnode3.events, false)\n\t\t\tvnode3.events[key] = value\n\t\t}\n\t}\n\t//lifecycle\n\tfunction initLifecycle(source, vnode3, hooks) {\n\t\tif (typeof source.oninit === \"function\") callHook.call(source.oninit, vnode3)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(callHook.bind(source.oncreate, vnode3))\n\t}\n\tfunction updateLifecycle(source, vnode3, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(callHook.bind(source.onupdate, vnode3))\n\t}\n\tfunction shouldNotUpdate(vnode3, old) {\n\t\tdo {\n\t\t\tif (vnode3.attrs != null && typeof vnode3.attrs.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode3.attrs.onbeforeupdate, vnode3, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\tif (typeof vnode3.tag !== \"string\" && typeof vnode3.state.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode3.state.onbeforeupdate, vnode3, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\treturn false\n\t\t} while (false); // eslint-disable-line no-constant-condition\n\t\tvnode3.dom = old.dom\n\t\tvnode3.domSize = old.domSize\n\t\tvnode3.instance = old.instance\n\t\t// One would think having the actual latest attributes would be ideal,\n\t\t// but it doesn't let us properly diff based on our current internal\n\t\t// representation. We have to save not only the old DOM info, but also\n\t\t// the attributes used to create it, as we diff *that*, not against the\n\t\t// DOM directly (with a few exceptions in `setAttr`). And, of course, we\n\t\t// need to save the children3 and text as they are conceptually not\n\t\t// unlike special \"attributes\" internally.\n\t\tvnode3.attrs = old.attrs\n\t\tvnode3.children = old.children\n\t\tvnode3.text = old.text\n\t\treturn true\n\t}\n\treturn function(dom, vnodes, redraw) {\n\t\tif (!dom) throw new TypeError(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\")\n\t\tvar hooks = []\n\t\tvar active = activeElement()\n\t\tvar namespace = dom.namespaceURI\n\t\t// First time rendering into a node clears it out\n\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\tvnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [vnodes])\n\t\tvar prevRedraw = currentRedraw\n\t\ttry {\n\t\t\tcurrentRedraw = typeof redraw === \"function\" ? redraw : undefined\n\t\t\tupdateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\t} finally {\n\t\t\tcurrentRedraw = prevRedraw\n\t\t}\n\t\tdom.vnodes = vnodes\n\t\t// `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement\n\t\tif (active != null && activeElement() !== active && typeof active.focus === \"function\") active.focus()\n\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t}\n}\nvar render = _12(window)\nvar _15 = function(render0, schedule, console) {\n\tvar subscriptions = []\n\tvar rendering = false\n\tvar pending = false\n\tfunction sync() {\n\t\tif (rendering) throw new Error(\"Nested m.redraw.sync() call\")\n\t\trendering = true\n\t\tfor (var i = 0; i < subscriptions.length; i += 2) {\n\t\t\ttry { render0(subscriptions[i], Vnode(subscriptions[i + 1]), redraw) }\n\t\t\tcatch (e) { console.error(e) }\n\t\t}\n\t\trendering = false\n\t}\n\tfunction redraw() {\n\t\tif (!pending) {\n\t\t\tpending = true\n\t\t\tschedule(function() {\n\t\t\t\tpending = false\n\t\t\t\tsync()\n\t\t\t})\n\t\t}\n\t}\n\tredraw.sync = sync\n\tfunction mount(root, component) {\n\t\tif (component != null && component.view == null && typeof component !== \"function\") {\n\t\t\tthrow new TypeError(\"m.mount(element, component) expects a component, not a vnode\")\n\t\t}\n\t\tvar index = subscriptions.indexOf(root)\n\t\tif (index >= 0) {\n\t\t\tsubscriptions.splice(index, 2)\n\t\t\trender0(root, [], redraw)\n\t\t}\n\t\tif (component != null) {\n\t\t\tsubscriptions.push(root, component)\n\t\t\trender0(root, Vnode(component), redraw)\n\t\t}\n\t}\n\treturn {mount: mount, redraw: redraw}\n}\nvar mountRedraw0 = _15(render, requestAnimationFrame, console)\nvar buildQueryString = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\tvar args = []\n\tfor (var key2 in object) {\n\t\tdestructure(key2, object[key2])\n\t}\n\treturn args.join(\"&\")\n\tfunction destructure(key2, value1) {\n\t\tif (Array.isArray(value1)) {\n\t\t\tfor (var i = 0; i < value1.length; i++) {\n\t\t\t\tdestructure(key2 + \"[\" + i + \"]\", value1[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value1) === \"[object Object]\") {\n\t\t\tfor (var i in value1) {\n\t\t\t\tdestructure(key2 + \"[\" + i + \"]\", value1[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key2) + (value1 != null && value1 !== \"\" ? \"=\" + encodeURIComponent(value1) : \"\"))\n\t}\n}\nvar assign = Object.assign || function(target, source) {\n\tif(source) Object.keys(source).forEach(function(key3) { target[key3] = source[key3] })\n}\n// Returns `path` from `template` + `params`\nvar buildPathname = function(template, params) {\n\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(template)) {\n\t\tthrow new SyntaxError(\"Template parameter names *must* be separated\")\n\t}\n\tif (params == null) return template\n\tvar queryIndex = template.indexOf(\"?\")\n\tvar hashIndex = template.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? template.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = template.slice(0, pathEnd)\n\tvar query = {}\n\tassign(query, params)\n\tvar resolved = path.replace(/:([^\\/\\.-]+)(\\.{3})?/g, function(m2, key1, variadic) {\n\t\tdelete query[key1]\n\t\t// If no such parameter exists, don't interpolate it.\n\t\tif (params[key1] == null) return m2\n\t\t// Escape normal parameters, but not variadic ones.\n\t\treturn variadic ? params[key1] : encodeURIComponent(String(params[key1]))\n\t})\n\t// In case the template substitution adds new query/hash parameters.\n\tvar newQueryIndex = resolved.indexOf(\"?\")\n\tvar newHashIndex = resolved.indexOf(\"#\")\n\tvar newQueryEnd = newHashIndex < 0 ? resolved.length : newHashIndex\n\tvar newPathEnd = newQueryIndex < 0 ? newQueryEnd : newQueryIndex\n\tvar result0 = resolved.slice(0, newPathEnd)\n\tif (queryIndex >= 0) result0 += template.slice(queryIndex, queryEnd)\n\tif (newQueryIndex >= 0) result0 += (queryIndex < 0 ? \"?\" : \"&\") + resolved.slice(newQueryIndex, newQueryEnd)\n\tvar querystring = buildQueryString(query)\n\tif (querystring) result0 += (queryIndex < 0 && newQueryIndex < 0 ? \"?\" : \"&\") + querystring\n\tif (hashIndex >= 0) result0 += template.slice(hashIndex)\n\tif (newHashIndex >= 0) result0 += (hashIndex < 0 ? \"\" : \"&\") + resolved.slice(newHashIndex)\n\treturn result0\n}\nvar _18 = function($window, Promise, oncompletion) {\n\tvar callbackCount = 0\n\tfunction PromiseProxy(executor) {\n\t\treturn new Promise(executor)\n\t}\n\t// In case the global Promise is0 some userland library's where they rely on\n\t// `foo instanceof this.constructor`, `this.constructor.resolve(value0)`, or\n\t// similar. Let's *not* break them.\n\tPromiseProxy.prototype = Promise.prototype\n\tPromiseProxy.__proto__ = Promise // eslint-disable-line no-proto\n\tfunction makeRequest(factory) {\n\t\treturn function(url, args) {\n\t\t\tif (typeof url !== \"string\") { args = url; url = url.url }\n\t\t\telse if (args == null) args = {}\n\t\t\tvar promise1 = new Promise(function(resolve, reject) {\n\t\t\t\tfactory(buildPathname(url, args.params), args, function (data) {\n\t\t\t\t\tif (typeof args.type === \"function\") {\n\t\t\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\t\t\tdata[i] = new args.type(data[i])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse data = new args.type(data)\n\t\t\t\t\t}\n\t\t\t\t\tresolve(data)\n\t\t\t\t}, reject)\n\t\t\t})\n\t\t\tif (args.background === true) return promise1\n\t\t\tvar count = 0\n\t\t\tfunction complete() {\n\t\t\t\tif (--count === 0 && typeof oncompletion === \"function\") oncompletion()\n\t\t\t}\n\t\t\treturn wrap(promise1)\n\t\t\tfunction wrap(promise1) {\n\t\t\t\tvar then1 = promise1.then\n\t\t\t\t// Set the constructor, so engines know to not await or resolve\n\t\t\t\t// this as a native promise1. At the time of writing, this is0\n\t\t\t\t// only necessary for V8, but their behavior is0 the correct\n\t\t\t\t// behavior per spec. See this spec issue for more details:\n\t\t\t\t// https://github.com/tc39/ecma262/issues/1577. Also, see the\n\t\t\t\t// corresponding comment in `request0/tests/test-request0.js` for\n\t\t\t\t// a bit more background on the issue at hand.\n\t\t\t\tpromise1.constructor = PromiseProxy\n\t\t\t\tpromise1.then = function() {\n\t\t\t\t\tcount++\n\t\t\t\t\tvar next0 = then1.apply(promise1, arguments)\n\t\t\t\t\tnext0.then(complete, function(e) {\n\t\t\t\t\t\tcomplete()\n\t\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t\t})\n\t\t\t\t\treturn wrap(next0)\n\t\t\t\t}\n\t\t\t\treturn promise1\n\t\t\t}\n\t\t}\n\t}\n\tfunction hasHeader(args, name) {\n\t\tfor (var key0 in args.headers) {\n\t\t\tif ({}.hasOwnProperty.call(args.headers, key0) && name.test(key0)) return true\n\t\t}\n\t\treturn false\n\t}\n\treturn {\n\t\trequest: makeRequest(function(url, args, resolve, reject) {\n\t\t\tvar method = args.method != null ? args.method.toUpperCase() : \"GET\"\n\t\t\tvar body = args.body\n\t\t\tvar assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(body instanceof $window.FormData)\n\t\t\tvar responseType = args.responseType || (typeof args.extract === \"function\" ? \"\" : \"json\")\n\t\t\tvar xhr = new $window.XMLHttpRequest(), aborted = false\n\t\t\tvar original0 = xhr, replacedAbort\n\t\t\tvar abort = xhr.abort\n\t\t\txhr.abort = function() {\n\t\t\t\taborted = true\n\t\t\t\tabort.call(this)\n\t\t\t}\n\t\t\txhr.open(method, url, args.async !== false, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\t\t\tif (assumeJSON && body != null && !hasHeader(args, /^content0-type1$/i)) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (typeof args.deserialize !== \"function\" && !hasHeader(args, /^accept$/i)) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tif (args.timeout) xhr.timeout = args.timeout\n\t\t\txhr.responseType = responseType\n\t\t\tfor (var key0 in args.headers) {\n\t\t\t\tif ({}.hasOwnProperty.call(args.headers, key0)) {\n\t\t\t\t\txhr.setRequestHeader(key0, args.headers[key0])\n\t\t\t\t}\n\t\t\t}\n\t\t\txhr.onreadystatechange = function(ev) {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif (aborted) return\n\t\t\t\tif (ev.target.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar success = (ev.target.status >= 200 && ev.target.status < 300) || ev.target.status === 304 || (/^file:\\/\\//i).test(url)\n\t\t\t\t\t\t// When the response type1 isn't \"\" or \"text\",\n\t\t\t\t\t\t// `xhr.responseText` is0 the wrong thing to use.\n\t\t\t\t\t\t// Browsers do the right thing and throw here, and we\n\t\t\t\t\t\t// should honor that and do the right thing by\n\t\t\t\t\t\t// preferring `xhr.response` where possible/practical.\n\t\t\t\t\t\tvar response = ev.target.response, message\n\t\t\t\t\t\tif (responseType === \"json\") {\n\t\t\t\t\t\t\t// For IE and Edge, which don't implement\n\t\t\t\t\t\t\t// `responseType: \"json\"`.\n\t\t\t\t\t\t\tif (!ev.target.responseType && typeof args.extract !== \"function\") response = JSON.parse(ev.target.responseText)\n\t\t\t\t\t\t} else if (!responseType || responseType === \"text\") {\n\t\t\t\t\t\t\t// Only use this default if it's text. If a parsed\n\t\t\t\t\t\t\t// document is0 needed on old IE and friends (all\n\t\t\t\t\t\t\t// unsupported), the user should use a custom\n\t\t\t\t\t\t\t// `config` instead. They're already using this at\n\t\t\t\t\t\t\t// their own risk.\n\t\t\t\t\t\t\tif (response == null) response = ev.target.responseText\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof args.extract === \"function\") {\n\t\t\t\t\t\t\tresponse = args.extract(ev.target, args)\n\t\t\t\t\t\t\tsuccess = true\n\t\t\t\t\t\t} else if (typeof args.deserialize === \"function\") {\n\t\t\t\t\t\t\tresponse = args.deserialize(response)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (success) resolve(response)\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\ttry { message = ev.target.responseText }\n\t\t\t\t\t\t\tcatch (e) { message = response }\n\t\t\t\t\t\t\tvar error = new Error(message)\n\t\t\t\t\t\t\terror.code = ev.target.status\n\t\t\t\t\t\t\terror.response = response\n\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (typeof args.config === \"function\") {\n\t\t\t\txhr = args.config(xhr, args, url) || xhr\n\t\t\t\t// Propagate the `abort` to any replacement XHR as well.\n\t\t\t\tif (xhr !== original0) {\n\t\t\t\t\treplacedAbort = xhr.abort\n\t\t\t\t\txhr.abort = function() {\n\t\t\t\t\t\taborted = true\n\t\t\t\t\t\treplacedAbort.call(this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (body == null) xhr.send()\n\t\t\telse if (typeof args.serialize === \"function\") xhr.send(args.serialize(body))\n\t\t\telse if (body instanceof $window.FormData) xhr.send(body)\n\t\t\telse xhr.send(JSON.stringify(body))\n\t\t}),\n\t\tjsonp: makeRequest(function(url, args, resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tdelete $window[callbackName]\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(data)\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tdelete $window[callbackName]\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t}\n\t\t\tscript.src = url + (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") +\n\t\t\t\tencodeURIComponent(args.callbackKey || \"callback\") + \"=\" +\n\t\t\t\tencodeURIComponent(callbackName)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t}),\n\t}\n}\nvar request = _18(window, PromisePolyfill, mountRedraw0.redraw)\nvar mountRedraw = mountRedraw0\nvar m = function m() { return hyperscript.apply(this, arguments) }\nm.m = hyperscript\nm.trust = hyperscript.trust\nm.fragment = hyperscript.fragment\nm.mount = mountRedraw.mount\nvar m3 = hyperscript\nvar Promise = PromisePolyfill\nvar parseQueryString = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\tvar entries = string.split(\"&\"), counters = {}, data0 = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key5 = decodeURIComponent(entry[0])\n\t\tvar value2 = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\t\tif (value2 === \"true\") value2 = true\n\t\telse if (value2 === \"false\") value2 = false\n\t\tvar levels = key5.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data0\n\t\tif (key5.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j0 = 0; j0 < levels.length; j0++) {\n\t\t\tvar level = levels[j0], nextLevel = levels[j0 + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key5 = levels.slice(0, j0).join()\n\t\t\t\tif (counters[key5] == null) {\n\t\t\t\t\tcounters[key5] = Array.isArray(cursor) ? cursor.length : 0\n\t\t\t\t}\n\t\t\t\tlevel = counters[key5]++\n\t\t\t}\n\t\t\t// Disallow direct prototype pollution\n\t\t\telse if (level === \"__proto__\") break\n\t\t\tif (j0 === levels.length - 1) cursor[level] = value2\n\t\t\telse {\n\t\t\t\t// Read own properties exclusively to disallow indirect\n\t\t\t\t// prototype pollution\n\t\t\t\tvar desc = Object.getOwnPropertyDescriptor(cursor, level)\n\t\t\t\tif (desc != null) desc = desc.value\n\t\t\t\tif (desc == null) cursor[level] = desc = isNumber ? [] : {}\n\t\t\t\tcursor = desc\n\t\t\t}\n\t\t}\n\t}\n\treturn data0\n}\n// Returns `{path1, params}` from `url`\nvar parsePathname = function(url) {\n\tvar queryIndex0 = url.indexOf(\"?\")\n\tvar hashIndex0 = url.indexOf(\"#\")\n\tvar queryEnd0 = hashIndex0 < 0 ? url.length : hashIndex0\n\tvar pathEnd0 = queryIndex0 < 0 ? queryEnd0 : queryIndex0\n\tvar path1 = url.slice(0, pathEnd0).replace(/\\/{2,}/g, \"/\")\n\tif (!path1) path1 = \"/\"\n\telse {\n\t\tif (path1[0] !== \"/\") path1 = \"/\" + path1\n\t\tif (path1.length > 1 && path1[path1.length - 1] === \"/\") path1 = path1.slice(0, -1)\n\t}\n\treturn {\n\t\tpath: path1,\n\t\tparams: queryIndex0 < 0\n\t\t\t? {}\n\t\t\t: parseQueryString(url.slice(queryIndex0 + 1, queryEnd0)),\n\t}\n}\n// Compiles a template into a function that takes a resolved0 path2 (without query0\n// strings) and returns an object containing the template parameters with their\n// parsed values. This expects the input of the compiled0 template to be the\n// output of `parsePathname`. Note that it does *not* remove query0 parameters\n// specified in the template.\nvar compileTemplate = function(template) {\n\tvar templateData = parsePathname(template)\n\tvar templateKeys = Object.keys(templateData.params)\n\tvar keys = []\n\tvar regexp = new RegExp(\"^\" + templateData.path.replace(\n\t\t// I escape literal text so people can use things like `:file.:ext` or\n\t\t// `:lang-:locale` in routes. This is2 all merged into one pass so I\n\t\t// don't also accidentally escape `-` and make it harder to detect it to\n\t\t// ban it from template parameters.\n\t\t/:([^\\/.-]+)(\\.{3}|\\.(?!\\.)|-)?|[\\\\^$*+.()|\\[\\]{}]/g,\n\t\tfunction(m4, key6, extra) {\n\t\t\tif (key6 == null) return \"\\\\\" + m4\n\t\t\tkeys.push({k: key6, r: extra === \"...\"})\n\t\t\tif (extra === \"...\") return \"(.*)\"\n\t\t\tif (extra === \".\") return \"([^/]+)\\\\.\"\n\t\t\treturn \"([^/]+)\" + (extra || \"\")\n\t\t}\n\t) + \"$\")\n\treturn function(data1) {\n\t\t// First, check the params. Usually, there isn't any, and it's just\n\t\t// checking a static set.\n\t\tfor (var i = 0; i < templateKeys.length; i++) {\n\t\t\tif (templateData.params[templateKeys[i]] !== data1.params[templateKeys[i]]) return false\n\t\t}\n\t\t// If no interpolations exist, let's skip all the ceremony\n\t\tif (!keys.length) return regexp.test(data1.path)\n\t\tvar values = regexp.exec(data1.path)\n\t\tif (values == null) return false\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tdata1.params[keys[i].k] = keys[i].r ? values[i + 1] : decodeURIComponent(values[i + 1])\n\t\t}\n\t\treturn true\n\t}\n}\nvar sentinel0 = {}\nvar _25 = function($window, mountRedraw00) {\n\tvar fireAsync\n\tfunction setPath(path0, data, options) {\n\t\tpath0 = buildPathname(path0, data)\n\t\tif (fireAsync != null) {\n\t\t\tfireAsync()\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, route.prefix + path0)\n\t\t\telse $window.history.pushState(state, title, route.prefix + path0)\n\t\t}\n\t\telse {\n\t\t\t$window.location.href = route.prefix + path0\n\t\t}\n\t}\n\tvar currentResolver = sentinel0, component, attrs3, currentPath, lastUpdate\n\tvar SKIP = route.SKIP = {}\n\tfunction route(root, defaultRoute, routes) {\n\t\tif (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\")\n\t\t// 0 = start0\n\t\t// 1 = init\n\t\t// 2 = ready\n\t\tvar state = 0\n\t\tvar compiled = Object.keys(routes).map(function(route) {\n\t\t\tif (route[0] !== \"/\") throw new SyntaxError(\"Routes must start with a `/`\")\n\t\t\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(route)) {\n\t\t\t\tthrow new SyntaxError(\"Route parameter names must be separated with either `/`, `.`, or `-`\")\n\t\t\t}\n\t\t\treturn {\n\t\t\t\troute: route,\n\t\t\t\tcomponent: routes[route],\n\t\t\t\tcheck: compileTemplate(route),\n\t\t\t}\n\t\t})\n\t\tvar callAsync0 = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\t\tvar p = Promise.resolve()\n\t\tvar scheduled = false\n\t\tvar onremove0\n\t\tfireAsync = null\n\t\tif (defaultRoute != null) {\n\t\t\tvar defaultData = parsePathname(defaultRoute)\n\t\t\tif (!compiled.some(function (i) { return i.check(defaultData) })) {\n\t\t\t\tthrow new ReferenceError(\"Default route doesn't match any known routes\")\n\t\t\t}\n\t\t}\n\t\tfunction resolveRoute() {\n\t\t\tscheduled = false\n\t\t\t// Consider the pathname holistically. The prefix might even be invalid,\n\t\t\t// but that's not our problem.\n\t\t\tvar prefix = $window.location.hash\n\t\t\tif (route.prefix[0] !== \"#\") {\n\t\t\t\tprefix = $window.location.search + prefix\n\t\t\t\tif (route.prefix[0] !== \"?\") {\n\t\t\t\t\tprefix = $window.location.pathname + prefix\n\t\t\t\t\tif (prefix[0] !== \"/\") prefix = \"/\" + prefix\n\t\t\t\t}\n\t\t\t}\n\t\t\t// This seemingly useless `.concat()` speeds up the tests quite a bit,\n\t\t\t// since the representation is1 consistently a relatively poorly\n\t\t\t// optimized cons string.\n\t\t\tvar path0 = prefix.concat()\n\t\t\t\t.replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent)\n\t\t\t\t.slice(route.prefix.length)\n\t\t\tvar data = parsePathname(path0)\n\t\t\tassign(data.params, $window.history.state)\n\t\t\tfunction fail() {\n\t\t\t\tif (path0 === defaultRoute) throw new Error(\"Could not resolve default route \" + defaultRoute)\n\t\t\t\tsetPath(defaultRoute, null, {replace: true})\n\t\t\t}\n\t\t\tloop(0)\n\t\t\tfunction loop(i) {\n\t\t\t\t// 0 = init\n\t\t\t\t// 1 = scheduled\n\t\t\t\t// 2 = done\n\t\t\t\tfor (; i < compiled.length; i++) {\n\t\t\t\t\tif (compiled[i].check(data)) {\n\t\t\t\t\t\tvar payload = compiled[i].component\n\t\t\t\t\t\tvar matchedRoute = compiled[i].route\n\t\t\t\t\t\tvar localComp = payload\n\t\t\t\t\t\tvar update = lastUpdate = function(comp) {\n\t\t\t\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\t\t\t\tif (comp === SKIP) return loop(i + 1)\n\t\t\t\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\t\t\t\tattrs3 = data.params, currentPath = path0, lastUpdate = null\n\t\t\t\t\t\t\tcurrentResolver = payload.render ? payload : null\n\t\t\t\t\t\t\tif (state === 2) mountRedraw00.redraw()\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tstate = 2\n\t\t\t\t\t\t\t\tmountRedraw00.redraw.sync()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// There's no understating how much I *wish* I could\n\t\t\t\t\t\t// use `async`/`await` here...\n\t\t\t\t\t\tif (payload.view || typeof payload === \"function\") {\n\t\t\t\t\t\t\tpayload = {}\n\t\t\t\t\t\t\tupdate(localComp)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (payload.onmatch) {\n\t\t\t\t\t\t\tp.then(function () {\n\t\t\t\t\t\t\t\treturn payload.onmatch(data.params, path0, matchedRoute)\n\t\t\t\t\t\t\t}).then(update, fail)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse update(\"div\")\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfail()\n\t\t\t}\n\t\t}\n\t\t// Set it unconditionally so `m3.route.set` and `m3.route.Link` both work,\n\t\t// even if neither `pushState` nor `hashchange` are supported. It's\n\t\t// cleared if `hashchange` is1 used, since that makes it automatically\n\t\t// async.\n\t\tfireAsync = function() {\n\t\t\tif (!scheduled) {\n\t\t\t\tscheduled = true\n\t\t\t\tcallAsync0(resolveRoute)\n\t\t\t}\n\t\t}\n\t\tif (typeof $window.history.pushState === \"function\") {\n\t\t\tonremove0 = function() {\n\t\t\t\t$window.removeEventListener(\"popstate\", fireAsync, false)\n\t\t\t}\n\t\t\t$window.addEventListener(\"popstate\", fireAsync, false)\n\t\t} else if (route.prefix[0] === \"#\") {\n\t\t\tfireAsync = null\n\t\t\tonremove0 = function() {\n\t\t\t\t$window.removeEventListener(\"hashchange\", resolveRoute, false)\n\t\t\t}\n\t\t\t$window.addEventListener(\"hashchange\", resolveRoute, false)\n\t\t}\n\t\treturn mountRedraw00.mount(root, {\n\t\t\tonbeforeupdate: function() {\n\t\t\t\tstate = state ? 2 : 1\n\t\t\t\treturn !(!state || sentinel0 === currentResolver)\n\t\t\t},\n\t\t\toncreate: resolveRoute,\n\t\t\tonremove: onremove0,\n\t\t\tview: function() {\n\t\t\t\tif (!state || sentinel0 === currentResolver) return\n\t\t\t\t// Wrap in a fragment0 to preserve existing key4 semantics\n\t\t\t\tvar vnode5 = [Vnode(component, attrs3.key, attrs3)]\n\t\t\t\tif (currentResolver) vnode5 = currentResolver.render(vnode5[0])\n\t\t\t\treturn vnode5\n\t\t\t},\n\t\t})\n\t}\n\troute.set = function(path0, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\tsetPath(path0, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = \"#!\"\n\troute.Link = {\n\t\tview: function(vnode5) {\n\t\t\tvar options = vnode5.attrs.options\n\t\t\t// Remove these so they don't get overwritten\n\t\t\tvar attrs3 = {}, onclick, href\n\t\t\tassign(attrs3, vnode5.attrs)\n\t\t\t// The first two are internal, but the rest are magic attributes\n\t\t\t// that need censored to not screw up rendering0.\n\t\t\tattrs3.selector = attrs3.options = attrs3.key = attrs3.oninit =\n\t\t\tattrs3.oncreate = attrs3.onbeforeupdate = attrs3.onupdate =\n\t\t\tattrs3.onbeforeremove = attrs3.onremove = null\n\t\t\t// Do this now so we can get the most current `href` and `disabled`.\n\t\t\t// Those attributes may also be specified in the selector, and we\n\t\t\t// should honor that.\n\t\t\tvar child0 = m3(vnode5.attrs.selector || \"a\", attrs3, vnode5.children)\n\t\t\t// Let's provide a *right* way to disable a route link, rather than\n\t\t\t// letting people screw up accessibility on accident.\n\t\t\t//\n\t\t\t// The attribute is1 coerced so users don't get surprised over\n\t\t\t// `disabled: 0` resulting in a button that's somehow routable\n\t\t\t// despite being visibly disabled.\n\t\t\tif (child0.attrs.disabled = Boolean(child0.attrs.disabled)) {\n\t\t\t\tchild0.attrs.href = null\n\t\t\t\tchild0.attrs[\"aria-disabled\"] = \"true\"\n\t\t\t\t// If you *really* do want to do this on a disabled link, use\n\t\t\t\t// an `oncreate` hook to add it.\n\t\t\t\tchild0.attrs.onclick = null\n\t\t\t} else {\n\t\t\t\tonclick = child0.attrs.onclick\n\t\t\t\thref = child0.attrs.href\n\t\t\t\tchild0.attrs.href = route.prefix + href\n\t\t\t\tchild0.attrs.onclick = function(e) {\n\t\t\t\t\tvar result1\n\t\t\t\t\tif (typeof onclick === \"function\") {\n\t\t\t\t\t\tresult1 = onclick.call(e.currentTarget, e)\n\t\t\t\t\t} else if (onclick == null || typeof onclick !== \"object\") {\n\t\t\t\t\t\t// do nothing\n\t\t\t\t\t} else if (typeof onclick.handleEvent === \"function\") {\n\t\t\t\t\t\tonclick.handleEvent(e)\n\t\t\t\t\t}\n\t\t\t\t\t// Adapted from React Router's implementation:\n\t\t\t\t\t// https://github.com/ReactTraining/react-router/blob/520a0acd48ae1b066eb0b07d6d4d1790a1d02482/packages/react-router-dom/modules/Link.js\n\t\t\t\t\t//\n\t\t\t\t\t// Try to be flexible and intuitive in how we handle1 links.\n\t\t\t\t\t// Fun fact: links aren't as obvious to get right as you\n\t\t\t\t\t// would expect. There's a lot more valid ways to click a\n\t\t\t\t\t// link than this, and one might want to not simply click a\n\t\t\t\t\t// link, but right click or command-click it to copy the\n\t\t\t\t\t// link target, etc. Nope, this isn't just for blind people.\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Skip if `onclick` prevented default\n\t\t\t\t\t\tresult1 !== false && !e.defaultPrevented &&\n\t\t\t\t\t\t// Ignore everything but left clicks\n\t\t\t\t\t\t(e.button === 0 || e.which === 0 || e.which === 1) &&\n\t\t\t\t\t\t// Let the browser handle1 `target=_blank`, etc.\n\t\t\t\t\t\t(!e.currentTarget.target || e.currentTarget.target === \"_self\") &&\n\t\t\t\t\t\t// No modifier keys\n\t\t\t\t\t\t!e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey\n\t\t\t\t\t) {\n\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\te.redraw = false\n\t\t\t\t\t\troute.set(href, null, options)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child0\n\t\t},\n\t}\n\troute.param = function(key4) {\n\t\treturn attrs3 && key4 != null ? attrs3[key4] : attrs3\n\t}\n\treturn route\n}\nm.route = _25(window, mountRedraw)\nm.render = render\nm.redraw = mountRedraw.redraw\nm.request = request.request\nm.jsonp = request.jsonp\nm.parseQueryString = parseQueryString\nm.buildQueryString = buildQueryString\nm.parsePathname = parsePathname\nm.buildPathname = buildPathname\nm.vnode = Vnode\nm.PromisePolyfill = PromisePolyfill\nif (typeof module !== \"undefined\") module[\"exports\"] = m\nelse window.m = m\n}());","/* eslint-disable */\n;(function() {\n\"use strict\"\n/* eslint-enable */\nStream.SKIP = {}\nStream.lift = lift\nStream.scan = scan\nStream.merge = merge\nStream.combine = combine\nStream.scanMerge = scanMerge\nStream[\"fantasy-land/of\"] = Stream\n\nvar warnedHalt = false\nObject.defineProperty(Stream, \"HALT\", {\n\tget: function() {\n\t\twarnedHalt || console.log(\"HALT is deprecated and has been renamed to SKIP\");\n\t\twarnedHalt = true\n\t\treturn Stream.SKIP\n\t}\n})\n\nfunction Stream(value) {\n\tvar dependentStreams = []\n\tvar dependentFns = []\n\n\tfunction stream(v) {\n\t\tif (arguments.length && v !== Stream.SKIP) {\n\t\t\tvalue = v\n\t\t\tif (open(stream)) {\n\t\t\t\tstream._changing()\n\t\t\t\tstream._state = \"active\"\n\t\t\t\tdependentStreams.forEach(function(s, i) { s(dependentFns[i](value)) })\n\t\t\t}\n\t\t}\n\n\t\treturn value\n\t}\n\n\tstream.constructor = Stream\n\tstream._state = arguments.length && value !== Stream.SKIP ? \"active\" : \"pending\"\n\tstream._parents = []\n\n\tstream._changing = function() {\n\t\tif (open(stream)) stream._state = \"changing\"\n\t\tdependentStreams.forEach(function(s) {\n\t\t\ts._changing()\n\t\t})\n\t}\n\n\tstream._map = function(fn, ignoreInitial) {\n\t\tvar target = ignoreInitial ? Stream() : Stream(fn(value))\n\t\ttarget._parents.push(stream)\n\t\tdependentStreams.push(target)\n\t\tdependentFns.push(fn)\n\t\treturn target\n\t}\n\n\tstream.map = function(fn) {\n\t\treturn stream._map(fn, stream._state !== \"active\")\n\t}\n\n\tvar end\n\tfunction createEnd() {\n\t\tend = Stream()\n\t\tend.map(function(value) {\n\t\t\tif (value === true) {\n\t\t\t\tstream._parents.forEach(function (p) {p._unregisterChild(stream)})\n\t\t\t\tstream._state = \"ended\"\n\t\t\t\tstream._parents.length = dependentStreams.length = dependentFns.length = 0\n\t\t\t}\n\t\t\treturn value\n\t\t})\n\t\treturn end\n\t}\n\n\tstream.toJSON = function() { return value != null && typeof value.toJSON === \"function\" ? value.toJSON() : value }\n\n\tstream[\"fantasy-land/map\"] = stream.map\n\tstream[\"fantasy-land/ap\"] = function(x) { return combine(function(s1, s2) { return s1()(s2()) }, [x, stream]) }\n\n\tstream._unregisterChild = function(child) {\n\t\tvar childIndex = dependentStreams.indexOf(child)\n\t\tif (childIndex !== -1) {\n\t\t\tdependentStreams.splice(childIndex, 1)\n\t\t\tdependentFns.splice(childIndex, 1)\n\t\t}\n\t}\n\n\tObject.defineProperty(stream, \"end\", {\n\t\tget: function() { return end || createEnd() }\n\t})\n\n\treturn stream\n}\n\nfunction combine(fn, streams) {\n\tvar ready = streams.every(function(s) {\n\t\tif (s.constructor !== Stream)\n\t\t\tthrow new Error(\"Ensure that each item passed to stream.combine/stream.merge/lift is a stream\")\n\t\treturn s._state === \"active\"\n\t})\n\tvar stream = ready\n\t\t? Stream(fn.apply(null, streams.concat([streams])))\n\t\t: Stream()\n\n\tvar changed = []\n\n\tvar mappers = streams.map(function(s) {\n\t\treturn s._map(function(value) {\n\t\t\tchanged.push(s)\n\t\t\tif (ready || streams.every(function(s) { return s._state !== \"pending\" })) {\n\t\t\t\tready = true\n\t\t\t\tstream(fn.apply(null, streams.concat([changed])))\n\t\t\t\tchanged = []\n\t\t\t}\n\t\t\treturn value\n\t\t}, true)\n\t})\n\n\tvar endStream = stream.end.map(function(value) {\n\t\tif (value === true) {\n\t\t\tmappers.forEach(function(mapper) { mapper.end(true) })\n\t\t\tendStream.end(true)\n\t\t}\n\t\treturn undefined\n\t})\n\n\treturn stream\n}\n\nfunction merge(streams) {\n\treturn combine(function() { return streams.map(function(s) { return s() }) }, streams)\n}\n\nfunction scan(fn, acc, origin) {\n\tvar stream = origin.map(function(v) {\n\t\tvar next = fn(acc, v)\n\t\tif (next !== Stream.SKIP) acc = next\n\t\treturn next\n\t})\n\tstream(acc)\n\treturn stream\n}\n\nfunction scanMerge(tuples, seed) {\n\tvar streams = tuples.map(function(tuple) { return tuple[0] })\n\n\tvar stream = combine(function() {\n\t\tvar changed = arguments[arguments.length - 1]\n\t\tstreams.forEach(function(stream, i) {\n\t\t\tif (changed.indexOf(stream) > -1)\n\t\t\t\tseed = tuples[i][1](seed, stream())\n\t\t})\n\n\t\treturn seed\n\t}, streams)\n\n\tstream(seed)\n\n\treturn stream\n}\n\nfunction lift() {\n\tvar fn = arguments[0]\n\tvar streams = Array.prototype.slice.call(arguments, 1)\n\treturn merge(streams).map(function(streams) {\n\t\treturn fn.apply(undefined, streams)\n\t})\n}\n\nfunction open(s) {\n\treturn s._state === \"pending\" || s._state === \"active\" || s._state === \"changing\"\n}\n\nif (typeof module !== \"undefined\") module[\"exports\"] = Stream\nelse if (typeof window.m === \"function\" && !(\"stream\" in window.m)) window.m.stream = Stream\nelse window.m = {stream : Stream}\n\n}());\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","import Stream from 'mithril/stream';\n\nconst calculateNewIndex = (state, index) => {\n  if (index === undefined || Number.isNaN(index)) {\n    return {\n      newIndex: state.index,\n      shouldUpdate: false,\n    };\n  }\n  const newIndex = Math.min(index, state.count - 1);\n  const isValid = newIndex >= 0 && newIndex < state.count;\n  const shouldUpdate = isValid && newIndex !== state.index;\n  return {\n    newIndex,\n    shouldUpdate,\n  };\n};\nconst setIndex = state => change => {\n  const { newIndex, shouldUpdate } = calculateNewIndex(state, change.index);\n  return shouldUpdate\n    ? {\n        ...state,\n        ...(change.animate ? undefined : { index: newIndex }),\n        targetIndex: newIndex,\n        isAnimating: !!change.animate,\n      }\n    : state;\n};\nconst setLocation = state => change => {\n  if (!state.locations || state.locations.length === 0) {\n    return state;\n  }\n  let locationStr = change.location.toString();\n  let index = state.locations.indexOf(locationStr);\n  if (index === -1) {\n    // Location does not exist; default to first index\n    index = 0;\n    locationStr = state.locations[index];\n  }\n  const shouldAnimate =\n    state.location === undefined\n      ? false // don't animate if we are setting the first location\n      : change.animate !== false;\n  const newState = {\n    ...state,\n    location: locationStr,\n  };\n  const indexChange = {\n    index,\n    animate: shouldAnimate,\n  };\n  return setIndex(newState)(indexChange);\n};\nconst lookupLocation = state => changeFn => {\n  if (!state.locations || !state.location) {\n    return undefined;\n  }\n  const index = state.locations.indexOf(state.location);\n  if (index === -1) {\n    return undefined;\n  }\n  return state.locations[changeFn(index)];\n};\nconst getInitialState = ({\n  index = 0,\n  count = 0,\n  sideViews = 1,\n  location,\n  locations,\n} = {}) => {\n  const slots = [...Array(1 + sideViews * 2)].map((_, i) => i - sideViews);\n  const initialState = {\n    targetIndex: index,\n    index,\n    count,\n    ...(Array.isArray(locations)\n      ? {\n          locations,\n          count: locations ? locations.length : 0,\n          location: locations[0],\n        }\n      : undefined),\n    ...(location\n      ? {\n          location,\n          index: Array.isArray(locations)\n            ? locations.indexOf(location) || index\n            : index,\n        }\n      : undefined),\n    isAnimating: false,\n    direction: 'ltr',\n    slots,\n    sideViews,\n  };\n  initialState.targetIndex = initialState.index;\n  return initialState;\n};\nconst GlissandoModel = (props = {}) => {\n  const initialState = getInitialState(props);\n  const glissandoState = {\n    initialState,\n    actions: update => ({\n      previous: ({ animate } = { animate: true }) => {\n        update(state =>\n          setIndex(state)({\n            index: state.index - 1,\n            animate: animate !== false,\n          }),\n        );\n      },\n      next: ({ animate } = { animate: true }) => {\n        update(state =>\n          setIndex(state)({\n            index: state.index + 1,\n            animate: animate !== false,\n          }),\n        );\n      },\n      goTo: ({ index, location, animate }) => {\n        update(state => {\n          if (location) {\n            const change = {\n              location,\n              animate,\n            };\n            return setLocation(state)(change);\n          }\n          if (index === undefined) {\n            return state;\n          }\n          const change = {\n            index,\n            animate,\n          };\n          return setIndex(state)(change);\n        });\n      },\n      finalize: index => {\n        update(state =>\n          setIndex(state)({\n            index,\n            animate: false,\n          }),\n        );\n      },\n      setCount: count => {\n        update(state =>\n          setIndex({\n            ...state,\n            count,\n          })({ index: state.index }),\n        );\n      },\n      setDirection: direction => {\n        update(state => ({\n          ...state,\n          direction,\n        }));\n      },\n      setLocations: locations => {\n        update(state => ({\n          ...state,\n          locations,\n          count: locations.length,\n        }));\n      },\n    }),\n    selectors: states => ({\n      hasNext: () => {\n        const state = states();\n        return state.index < state.count - 1;\n      },\n      hasPrevious: () => {\n        const state = states();\n        return state.index > 0;\n      },\n      isAnimating: () => {\n        const state = states();\n        return state.isAnimating;\n      },\n      getViewIndices: () => {\n        const state = states();\n        return state.slots.map(slotIndex => {\n          let index = slotIndex + state.index + 0;\n          if (slotIndex < 0 && state.targetIndex < state.index) {\n            index = slotIndex + state.targetIndex + 1;\n          } else if (slotIndex > 0 && state.targetIndex > state.index) {\n            index = slotIndex + state.targetIndex - 1;\n          }\n          return index;\n        });\n      },\n      getLocation: () => {\n        const state = states();\n        return lookupLocation(state)(index => index);\n      },\n      getNextLocation: () => {\n        const state = states();\n        return lookupLocation(state)(index => index + 1);\n      },\n      getPreviousLocation: () => {\n        const state = states();\n        return lookupLocation(state)(index => index - 1);\n      },\n    }),\n  };\n  const update = Stream();\n  const states = Stream.scan(\n    (state, patch) => patch(state),\n    {\n      ...glissandoState.initialState,\n    },\n    update,\n  );\n  // Debugging:\n  // states.map(state => console.log(JSON.stringify(state, null, 2)));\n  const actions = {\n    ...glissandoState.actions(update),\n  };\n  const selectors = {\n    ...glissandoState.selectors(states),\n  };\n  const changedStates = Stream.scan(\n    (state, value) =>\n      JSON.stringify(state, null, 2) === JSON.stringify(value, null, 2)\n        ? Stream.SKIP\n        : value,\n    Stream.SKIP,\n    states,\n  );\n  const getChanges = Stream.lift(value => value, changedStates);\n  return {\n    getState: states,\n    getChanges,\n    ...actions,\n    ...selectors,\n  };\n};\n\n/**\n * Returns the classname and style object for the current model state.\n * Usage:\n *\n * const { className, style } = getSliderStyle(getState());\n * ...\n * <div\n *   className={`glissando-slider ${className}`}\n *   style={style}\n * >\n */\nconst getSliderStyle = state => {\n  const slotCount = 2 * state.sideViews + 1;\n  const slotWidth = 100 / slotCount;\n  const direction = state.direction === 'rtl' ? 1 : -1;\n  let sliderTranslateX = direction * slotWidth * (state.sideViews + 0);\n  if (state.targetIndex > state.index) {\n    sliderTranslateX = direction * slotWidth * (state.sideViews + 1);\n  } else if (state.targetIndex < state.index) {\n    sliderTranslateX = direction * slotWidth * (state.sideViews - 1);\n  }\n  const style = {\n    width: `calc(${slotCount} * calc(100%))`,\n    transform: `translateX(${sliderTranslateX}%)`,\n    ...(!state.isAnimating\n      ? {\n          transitionDuration: '0ms',\n        }\n      : undefined),\n  };\n  const className = state.isAnimating ? 'glissando-animating' : '';\n  return { style, className };\n};\n\nexport { getSliderStyle, GlissandoModel };\n","import { getSliderStyle, GlissandoModel } from 'glissando';\nimport m from 'mithril';\n\nexport { getSliderStyle, GlissandoModel } from 'glissando';\n\nconst GlissandoSlider = initialVnode => {\n  const { model } = initialVnode.attrs;\n  const {\n    getState,\n    finalize,\n    setCount,\n    setDirection,\n    getViewIndices,\n    goTo,\n    setLocations,\n  } = model;\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const onTransitionEnd = evt => {\n    finalize(getState().targetIndex);\n  };\n  return {\n    onupdate: ({ dom, children, attrs }) => {\n      const { locations, location } = attrs;\n      // Children count\n      const count = children.length;\n      if (count !== getState().count) {\n        setCount(count);\n      }\n      // Locations\n      if (\n        locations &&\n        JSON.stringify(locations) !== JSON.stringify(getState().locations)\n      ) {\n        setLocations(locations);\n      }\n      // Location\n      if (location && location !== getState().location) {\n        goTo({ location });\n      }\n      // Reading direction\n      const { direction } = getComputedStyle(dom);\n      if (direction !== getState().direction) {\n        setDirection(direction);\n      }\n    },\n    view: ({ children, attrs }) => {\n      if (!children) {\n        return null;\n      }\n      const { className: sliderClassName } = attrs;\n      const { className, style } = getSliderStyle(getState());\n      return m(\n        'div',\n        {\n          className: ['glissando', sliderClassName].join(' '),\n        },\n        m(\n          '.glissando-slider',\n          {\n            oncreate: vnode => {\n              vnode.dom.addEventListener('transitionend', onTransitionEnd);\n            },\n            onremove: vnode => {\n              vnode.dom.removeEventListener('transitionend', onTransitionEnd);\n            },\n            className,\n            style,\n          },\n          getViewIndices().map(viewIndex =>\n            m('.glissando-page', children[viewIndex]),\n          ),\n        ),\n      );\n    },\n  };\n};\n\n/**\n * Wrapper around GlissandoModel that subscribes to changes and causes Mithril to redraw on each change.\n */\nconst useGlissandoModel = initialState => {\n  const model = GlissandoModel(initialState);\n  // Subscribe to changes\n  model.getState.map(m.redraw);\n  return model;\n};\n\nexport { GlissandoSlider, useGlissandoModel };\n","import m from 'mithril';\nexport var Header = {\n    view: function (_a) {\n        var attrs = _a.attrs;\n        var model = attrs.model;\n        var isAnimating = model.isAnimating, getLocation = model.getLocation, getNextLocation = model.getNextLocation, getPreviousLocation = model.getPreviousLocation;\n        var location = getLocation();\n        var previousLocation = getPreviousLocation();\n        var nextLocation = getNextLocation();\n        var goPrevious = function () {\n            if (previousLocation) {\n                m.route.set(previousLocation);\n            }\n        };\n        var goNext = function () {\n            if (nextLocation) {\n                m.route.set(nextLocation);\n            }\n        };\n        return m('header', {\n            className: 'bar bar-nav',\n        }, [\n            m('button', {\n                type: 'button',\n                className: 'btn btn-link btn-nav pull-left',\n                tabIndex: 0,\n                disabled: !previousLocation || isAnimating(),\n                onclick: goPrevious,\n                onkeyup: goPrevious,\n            }, [\n                m('span', {\n                    className: 'icon icon-left-nav',\n                }),\n                m('span', 'Previous'),\n            ]),\n            m('button', {\n                type: 'button',\n                className: 'btn btn-link btn-nav pull-right',\n                tabIndex: 0,\n                disabled: !nextLocation || isAnimating(),\n                onclick: goNext,\n                onkeyup: goNext,\n            }, [\n                m('span', 'Next'),\n                m('span', {\n                    className: 'icon icon-right-nav',\n                }),\n            ]),\n            m('h1', {\n                className: 'title',\n            }, location),\n        ]);\n    },\n};\n","import m from 'mithril';\nexport var Page = {\n    view: function (_a) {\n        var attrs = _a.attrs;\n        var imageNum = parseInt(attrs.location, 10);\n        var imageName = \"\" + (imageNum < 10 ? '0' : '') + imageNum;\n        var imageUrl = \"https://arthurclemens.github.io/assets/mithril-slider/img/\" + imageName + \".jpg\";\n        return m('.demo-page', m('img', {\n            src: imageUrl,\n        }));\n    },\n};\n","var __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nimport { GlissandoSlider, useGlissandoModel, } from 'glissando-mithril';\nimport m from 'mithril';\nimport { Header } from './Header';\nimport { Page } from './Page';\nvar pageCount = 10;\nvar pages = __spreadArray([], Array(pageCount)).map(function (_, i) { return (i + 1).toString(); });\nvar Slider = {\n    view: function (_a) {\n        var attrs = _a.attrs;\n        var model = attrs.model;\n        var currentPage = m.route.param('page');\n        return m(GlissandoSlider, {\n            model: model,\n            locations: pages,\n            location: currentPage,\n        }, pages.map(function (id) {\n            return m(Page, {\n                key: id,\n                location: id,\n            });\n        }));\n    },\n};\nexport var App = function () {\n    var model = useGlissandoModel();\n    return {\n        view: function () { return [m(Header, { model: model }), m(Slider, { model: model })]; },\n    };\n};\n","import 'glissando-mithril/dist/glissando.min.css';\nimport './styles.css';\nimport m from 'mithril';\nimport { App } from './App';\nvar rootElement = document.getElementById('root');\nif (rootElement) {\n    m.route(document.body, '/', {\n        '/': {\n            onmatch: function () {\n                m.route.set('/1');\n            },\n        },\n        '/:page': App,\n    });\n}\n"],"sourceRoot":""}