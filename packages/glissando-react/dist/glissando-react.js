!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@huse/effect-ref"),require("glissando"),require("react"),require("use-stream")):"function"==typeof define&&define.amd?define(["exports","@huse/effect-ref","glissando","react","use-stream"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).glissandoReact={},e.effectRef,e.glissando,e.React,e.useStream)}(this,function(e,p,v,E,n){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var b=t(E);Object.defineProperty(e,"GlissandoModel",{enumerable:!0,get:function(){return v.GlissandoModel}}),Object.defineProperty(e,"getSliderStyle",{enumerable:!0,get:function(){return v.getSliderStyle}}),e.GlissandoSlider=function(e){var t=e.model,n=e.children,i=e.locations,r=e.location,a=e.className,o=E.useState(),s=o[0],l=o[1],u=t.getState,f=t.finalize,c=t.setCount,d=t.setDirection,g=t.getViewIndices,m=t.setLocations,y=t.goTo;E.useEffect(function(){var e=(n||[]).length;e!==u().count&&c(e)},[n,u,c]),E.useEffect(function(){i&&JSON.stringify(i)!==JSON.stringify(u().locations)&&m(i)},[i]),E.useEffect(function(){r&&r!==u().location&&y({location:r})},[r]);var S=E.useCallback(function(e){if(null===e)return b.default.createElement(b.default.Fragment,null);l(e);function t(e){f(u().targetIndex)}return e.addEventListener("transitionend",t),function(){e.removeEventListener("transitionend",t)}},[]);E.useEffect(function(){var e;!s||(e=getComputedStyle(s).direction)!==u().direction&&d(e)},[e]);o=p.useEffectRef(function(e){return S(e)});if(!n)return b.default.createElement(b.default.Fragment,null);t=v.getSliderStyle(u()),e=t.className,t=t.style;return b.default.createElement("div",{className:["glissando",a].join(" ")},b.default.createElement("div",{className:"glissando-slider "+e,style:t,ref:o},g().map(function(e){return b.default.createElement("div",{key:e,className:"glissando-page"},n[e])})))},e.useGlissandoModel=function(e){var t=E.useState(v.GlissandoModel(e))[0];return n.useStream({model:function(){return{_:t.getState}},defer:!0}),t},Object.defineProperty(e,"__esModule",{value:!0})});
