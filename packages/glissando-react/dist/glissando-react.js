!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react/jsx-runtime"),require("@huse/effect-ref"),require("glissando"),require("react"),require("use-stream")):"function"==typeof define&&define.amd?define(["exports","react/jsx-runtime","@huse/effect-ref","glissando","react","use-stream"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).glissandoReact={},e.jsxRuntime,e.effectRef,e.glissando,e.react,e.useStream)}(this,(function(e,t,s,n,i,r){"use strict";Object.defineProperty(e,"GlissandoModel",{enumerable:!0,get:function(){return n.GlissandoModel}}),Object.defineProperty(e,"getSliderStyle",{enumerable:!0,get:function(){return n.getSliderStyle}}),e.GlissandoSlider=e=>{const{model:r,children:o,locations:a,location:l,className:d}=e,[c,u]=i.useState(),{getState:f,finalize:g,setCount:m,setDirection:j,getViewIndices:S,setLocations:y,goTo:p}=r;i.useEffect((()=>{const e=(o||[]).length;e!==f().count&&m(e)}),[o,f,m]),i.useEffect((()=>{a&&JSON.stringify(a)!==JSON.stringify(f().locations)&&y(a)}),[a]),i.useEffect((()=>{l&&l!==f().location&&p({location:l})}),[l]);const b=i.useCallback((e=>{if(null===e)return t.jsx(t.Fragment,{},void 0);u(e);const s=e=>{g(f().targetIndex)};return e.addEventListener("transitionend",s),()=>{e.removeEventListener("transitionend",s)}}),[]);i.useEffect((()=>{if(!c)return;const{direction:e}=getComputedStyle(c);e!==f().direction&&j(e)}),[e]);const x=s.useEffectRef((e=>b(e)));if(!o)return t.jsx(t.Fragment,{},void 0);const{className:v,style:h}=n.getSliderStyle(f());return t.jsx("div",Object.assign({className:["glissando",d].join(" ")},{children:t.jsx("div",Object.assign({className:`glissando-slider ${v}`,style:h,ref:x},{children:S().map((e=>t.jsx("div",Object.assign({className:"glissando-page"},{children:o[e]}),e)))}),void 0)}),void 0)},e.useGlissandoModel=e=>{const[t]=i.useState(n.GlissandoModel(e));return r.useStream({model:()=>({_:t.getState}),defer:!0}),t},Object.defineProperty(e,"__esModule",{value:!0})}));
