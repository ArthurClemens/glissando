!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react/jsx-runtime"),require("@huse/effect-ref"),require("glissando"),require("react"),require("use-stream")):"function"==typeof define&&define.amd?define(["exports","react/jsx-runtime","@huse/effect-ref","glissando","react","use-stream"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).glissandoReact={},e.jsxRuntime,e.effectRef,e.glissando,e.react,e.useStream)}(this,function(e,y,p,b,x,s){"use strict";Object.defineProperty(e,"GlissandoModel",{enumerable:!0,get:function(){return b.GlissandoModel}}),Object.defineProperty(e,"getSliderStyle",{enumerable:!0,get:function(){return b.getSliderStyle}}),e.GlissandoSlider=e=>{const{model:t,children:s,locations:n,location:i,className:r}=e,[o,a]=x.useState(),{getState:l,finalize:d,setCount:c,setDirection:u,getViewIndices:f,setLocations:g,goTo:m}=t;x.useEffect(()=>{var e=(s||[]).length;e!==l().count&&c(e)},[s,l,c]),x.useEffect(()=>{n&&JSON.stringify(n)!==JSON.stringify(l().locations)&&g(n)},[n]),x.useEffect(()=>{i&&i!==l().location&&m({location:i})},[i]);const j=x.useCallback(e=>{if(null===e)return y.jsx(y.Fragment,{},void 0);a(e);const t=e=>{d(l().targetIndex)};return e.addEventListener("transitionend",t),()=>{e.removeEventListener("transitionend",t)}},[]);x.useEffect(()=>{var e;o&&({direction:e}=getComputedStyle(o),e!==l().direction&&u(e))},[e]);var S=p.useEffectRef(e=>j(e));if(!s)return y.jsx(y.Fragment,{},void 0);var{className:v,style:e}=b.getSliderStyle(l());return y.jsx("div",Object.assign({className:["glissando",r].join(" ")},{children:y.jsx("div",Object.assign({className:`glissando-slider ${v}`,style:e,ref:S},{children:f().map(e=>y.jsx("div",Object.assign({className:"glissando-page"},{children:s[e]}),e))}),void 0)}),void 0)},e.useGlissandoModel=e=>{const[t]=x.useState(b.GlissandoModel(e));return s.useStream({model:()=>({_:t.getState}),defer:!0}),t},Object.defineProperty(e,"__esModule",{value:!0})});
